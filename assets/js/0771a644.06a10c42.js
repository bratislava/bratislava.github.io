"use strict";(self.webpackChunkbratislava_github_io=self.webpackChunkbratislava_github_io||[]).push([[5134],{3905:(e,a,t)=>{t.d(a,{Zo:()=>c,kt:()=>f});var n=t(7294);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function o(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?o(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function s(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=n.createContext({}),u=function(e){var a=n.useContext(l),t=a;return e&&(t="function"==typeof e?e(a):i(i({},a),e)),t},c=function(e){var a=u(e.components);return n.createElement(l.Provider,{value:a},e.children)},p={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},d=n.forwardRef((function(e,a){var t=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=u(t),f=r,g=d["".concat(l,".").concat(f)]||d[f]||p[f]||o;return t?n.createElement(g,i(i({ref:a},c),{},{components:t})):n.createElement(g,i({ref:a},c))}));function f(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var o=t.length,i=new Array(o);i[0]=d;var s={};for(var l in a)hasOwnProperty.call(a,l)&&(s[l]=a[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var u=2;u<o;u++)i[u]=t[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,t)}d.displayName="MDXCreateElement"},2956:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>u});var n=t(7462),r=(t(7294),t(3905));const o={},i="Grafana",s={unversionedId:"deployment-and-infrastructure/grafana",id:"deployment-and-infrastructure/grafana",title:"Grafana",description:"We're using grafana for monitoring purposes.",source:"@site/docs/deployment-and-infrastructure/grafana.md",sourceDirName:"deployment-and-infrastructure",slug:"/deployment-and-infrastructure/grafana",permalink:"/docs/deployment-and-infrastructure/grafana",draft:!1,editUrl:"https://github.com/bratislava/bratislava.github.io/edit/master/docs/deployment-and-infrastructure/grafana.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Github actions",permalink:"/docs/deployment-and-infrastructure/github-actions"},next:{title:"haproxy guide",permalink:"/docs/deployment-and-infrastructure/haproxy"}},l={},u=[{value:"Access",id:"access",level:2},{value:"Monitoring dashboard",id:"monitoring-dashboard",level:2},{value:"Installing plugins",id:"installing-plugins",level:2}],c={toc:u};function p(e){let{components:a,...t}=e;return(0,r.kt)("wrapper",(0,n.Z)({},c,t,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"grafana"},"Grafana"),(0,r.kt)("p",null,"We're using grafana for monitoring purposes."),(0,r.kt)("h2",{id:"access"},"Access"),(0,r.kt)("p",null,"Grafana is available only to whitelisted people. If you need you access to grafana, please ask an administrator. Or if you have an acceess rights you can add new person here:\n",(0,r.kt)("a",{parentName:"p",href:"https://portal.azure.com/#blade/Microsoft_AAD_IAM/ManagedAppMenuBlade/Users/objectId/efcd09e4-9cf1-418f-aaa9-55f848c3f027/appId/0ed658f0-929d-499f-a198-da9b563b44ee"},"https://portal.azure.com/#blade/Microsoft_AAD_IAM/ManagedAppMenuBlade/Users/objectId/efcd09e4-9cf1-418f-aaa9-55f848c3f027/appId/0ed658f0-929d-499f-a198-da9b563b44ee")),(0,r.kt)("p",null,"If you need to add an external developer, you can Invite them as guests into Bratislava Active Directory (Azure portal -> Active Directory -> Users -> New/Invite -> Guest/External)."),(0,r.kt)("h2",{id:"monitoring-dashboard"},"Monitoring dashboard"),(0,r.kt)("p",null,"You can have a look on all our services in this dashboard:\n",(0,r.kt)("a",{parentName:"p",href:"https://grafana.bratislava.sk/d/NEYiLUzik/health-status"},"https://grafana.bratislava.sk/d/NEYiLUzik/health-status")),(0,r.kt)("p",null,"There you can find results from health cron worker and metrics from our kubernetes cluster. So if some service is not working, have a look it there to see its status."),(0,r.kt)("h2",{id:"installing-plugins"},"Installing plugins"),(0,r.kt)("p",null,"If you need install some plugins in Grafana you need to change it in helm settings, because otherwise your changes will not last long."),(0,r.kt)("p",null,"Have a look in this file:\n",(0,r.kt)("a",{parentName:"p",href:"https://dev.azure.com/bratislava-innovation/_git/Infrastructure?path=/helm-overrides/master/grafana.yml"},"https://dev.azure.com/bratislava-innovation/_git/Infrastructure?path=/helm-overrides/master/grafana.yml")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"global:\nstorageClass: vsan-default-storage-policy\n\nconfig:\nuseGrafanaIniFile: true\ngrafanaIniConfigMap: grafana\n\nservice:\ntype: ClusterIP\nports:\ngrafana: 80\n\nadmin:\npassword: n6msH52T02D7z7dO\n\nplugins: yesoreyeram-infinity-datasource\n\ngrafana:\nupdateStrategy:\ntype: Recreate\n")),(0,r.kt)("p",null,"in ",(0,r.kt)("inlineCode",{parentName:"p"},"plugins")," you can specify more plugins. But be aware that array values are not working, and it needs to be added as comma separated values, like:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"plugins: yesoreyeram-infinity-datasource, other-special-plugin\n")),(0,r.kt)("p",null,"Then you need to commit and push the changes. Pipelines will deploy the newest changes to kubernetes."))}p.isMDXComponent=!0}}]);