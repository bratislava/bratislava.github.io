(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7551],{4146:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/graphql",function(){return n(2981)}])},3957:function(e,s,n){"use strict";var r=n(5893);n(7294);let t={logo:(0,r.jsx)("span",{children:"\uD83D\uDCDA Bratislava Documentation"}),project:{link:"https://github.com/bratislava"},docsRepositoryBase:"https://github.com/bratislava/bratislava.github.io",sidebar:{defaultMenuCollapseLevel:0},footer:{text:"Department of Innovation and Technology of the City of Bratislava"},faviconGlyph:"\uD83D\uDCDA"};s.Z=t},2981:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return l.ZP}});var r,t=n(5893),o=n(2720),i=n(3957);n(5513);var a=n(1151);n(5675);var l=n(1235);let c={filePath:"pages/graphql.md",route:"/graphql",frontMatter:{},pageMap:[{kind:"Meta",data:{index:"Introduction",onboarding:"Onboarding","-- Web development --":{type:"separator"},strapi:"Strapi",graphql:"GraphQL",meilisearch:"Meilisearch",frontend:"Frontend","project-specific":"Project specific","-- Others --":{type:"separator"},"deployment-and-infrastructure":"Deployment and Infrastructure",nestjs:"Nestjs",recipes:"Recipes"}},{kind:"Folder",name:"deployment-and-infrastructure",route:"/deployment-and-infrastructure",children:[{kind:"MdxPage",name:"backups",route:"/deployment-and-infrastructure/backups"},{kind:"MdxPage",name:"database-backups",route:"/deployment-and-infrastructure/database-backups"},{kind:"MdxPage",name:"deployment",route:"/deployment-and-infrastructure/deployment"},{kind:"MdxPage",name:"grafana",route:"/deployment-and-infrastructure/grafana"},{kind:"Meta",data:{backups:"Backups","database-backups":"Database Backups",deployment:"Deployment",grafana:"Grafana"}}]},{kind:"Folder",name:"frontend",route:"/frontend",children:[{kind:"Meta",data:{captcha:{display:"hidden"},"data-fetching-listing":{title:"Data fetching & listing",display:"hidden"},"date-and-time":{title:"Date & time",display:"hidden"},fonts:{display:"hidden"},gallery:{display:"hidden"},icons:{display:"hidden"},images:{display:"hidden"},localization:{display:"hidden"},menu:{display:"hidden"},"navigation-breadcrumbs":{title:"Navigation & breadcrumbs",display:"hidden"},search:{display:"hidden"},seo:{display:"hidden"},texts:{display:"hidden"},components:"Components"}},{kind:"MdxPage",name:"captcha",route:"/frontend/captcha"},{kind:"Folder",name:"components",route:"/frontend/components",children:[{kind:"Meta",data:{cards:{display:"hidden"},links:{display:"hidden"},modals:{display:"hidden"},tables:"Tables"}},{kind:"MdxPage",name:"cards",route:"/frontend/components/cards"},{kind:"MdxPage",name:"links",route:"/frontend/components/links"},{kind:"MdxPage",name:"modals",route:"/frontend/components/modals"},{kind:"MdxPage",name:"tables",route:"/frontend/components/tables"}]},{kind:"MdxPage",name:"components",route:"/frontend/components"},{kind:"MdxPage",name:"data-fetching-listing",route:"/frontend/data-fetching-listing"},{kind:"MdxPage",name:"date-and-time",route:"/frontend/date-and-time"},{kind:"MdxPage",name:"fonts",route:"/frontend/fonts"},{kind:"MdxPage",name:"gallery",route:"/frontend/gallery"},{kind:"MdxPage",name:"icons",route:"/frontend/icons"},{kind:"MdxPage",name:"images",route:"/frontend/images"},{kind:"MdxPage",name:"localization",route:"/frontend/localization"},{kind:"MdxPage",name:"menu",route:"/frontend/menu"},{kind:"MdxPage",name:"navigation-breadcrumbs",route:"/frontend/navigation-breadcrumbs"},{kind:"MdxPage",name:"search",route:"/frontend/search"},{kind:"MdxPage",name:"seo",route:"/frontend/seo"},{kind:"MdxPage",name:"texts",route:"/frontend/texts"}]},{kind:"MdxPage",name:"graphql",route:"/graphql"},{kind:"MdxPage",name:"index",route:"/",frontMatter:{sidebar_position:1}},{kind:"MdxPage",name:"meilisearch",route:"/meilisearch"},{kind:"Folder",name:"nestjs",route:"/nestjs",children:[{kind:"MdxPage",name:"Authentication",route:"/nestjs/Authentication"},{kind:"MdxPage",name:"CardWebPay",route:"/nestjs/CardWebPay"},{kind:"MdxPage",name:"Controllers",route:"/nestjs/Controllers"},{kind:"MdxPage",name:"Kubernetes",route:"/nestjs/Kubernetes"},{kind:"MdxPage",name:"Logging",route:"/nestjs/Logging"},{kind:"MdxPage",name:"Module",route:"/nestjs/Module"},{kind:"MdxPage",name:"NestJS",route:"/nestjs/NestJS",frontMatter:{sidebar_position:1}},{kind:"MdxPage",name:"OpenAPI",route:"/nestjs/OpenAPI"},{kind:"MdxPage",name:"Prisma",route:"/nestjs/Prisma"},{kind:"MdxPage",name:"ProjectStructure",route:"/nestjs/ProjectStructure"},{kind:"MdxPage",name:"RestApi",route:"/nestjs/RestApi"},{kind:"MdxPage",name:"Sentry",route:"/nestjs/Sentry"},{kind:"MdxPage",name:"Services",route:"/nestjs/Services"},{kind:"MdxPage",name:"Testing",route:"/nestjs/Testing"},{kind:"Meta",data:{Authentication:"Authentication",CardWebPay:"Cardwebpay",Controllers:"Controllers",Kubernetes:"Kubernetes",Logging:"Logging",Module:"Module",NestJS:"Nestjs",OpenAPI:"Openapi",Prisma:"Prisma",ProjectStructure:"Projectstructure",RestApi:"Restapi",Sentry:"Sentry",Services:"Services",Testing:"Testing"}}]},{kind:"Folder",name:"onboarding",route:"/onboarding",children:[{kind:"Folder",name:"setup-and-access",route:"/onboarding/setup-and-access",children:[{kind:"MdxPage",name:"developer-accesses",route:"/onboarding/setup-and-access/developer-accesses"},{kind:"MdxPage",name:"docker-setup",route:"/onboarding/setup-and-access/docker-setup"},{kind:"MdxPage",name:"editor-setup",route:"/onboarding/setup-and-access/editor-setup"},{kind:"MdxPage",name:"kubernetes-lens-setup",route:"/onboarding/setup-and-access/kubernetes-lens-setup"},{kind:"MdxPage",name:"postgres-setup",route:"/onboarding/setup-and-access/postgres-setup"},{kind:"Meta",data:{"developer-accesses":"Developer Accesses","docker-setup":"Docker Setup","editor-setup":"Editor Setup","kubernetes-lens-setup":"Kubernetes Lens Setup","postgres-setup":"Postgres Setup"}}]},{kind:"Folder",name:"workflows",route:"/onboarding/workflows",children:[{kind:"MdxPage",name:"git-workflow",route:"/onboarding/workflows/git-workflow"},{kind:"MdxPage",name:"meetings-syncs-rituals",route:"/onboarding/workflows/meetings-syncs-rituals"},{kind:"Meta",data:{"git-workflow":"Git Workflow","meetings-syncs-rituals":"Meetings Syncs Rituals"}}]}]},{kind:"Folder",name:"project-specific",route:"/project-specific",children:[{kind:"Folder",name:"bratislava.sk",route:"/project-specific/bratislava.sk",children:[{kind:"MdxPage",name:"add-new-component-to-sections",route:"/project-specific/bratislava.sk/add-new-component-to-sections"},{kind:"MdxPage",name:"colors-and-themes",route:"/project-specific/bratislava.sk/colors-and-themes"},{kind:"MdxPage",name:"forms-general",route:"/project-specific/bratislava.sk/forms-general"},{kind:"MdxPage",name:"forms-uischema",route:"/project-specific/bratislava.sk/forms-uischema"},{kind:"MdxPage",name:"forms-upload-file",route:"/project-specific/bratislava.sk/forms-upload-file"},{kind:"MdxPage",name:"meilisearch-setup",route:"/project-specific/bratislava.sk/meilisearch-setup"},{kind:"MdxPage",name:"react-component-structure",route:"/project-specific/bratislava.sk/react-component-structure"},{kind:"Meta",data:{"add-new-component-to-sections":"Add New Component to Sections","colors-and-themes":"Colors and Themes","forms-general":"Forms General","forms-uischema":"Forms Uischema","forms-upload-file":"Forms Upload File","meilisearch-setup":"Meilisearch Setup","react-component-structure":"React Component Structure"}}]}]},{kind:"Folder",name:"recipes",route:"/recipes",children:[{kind:"Folder",name:"alerting",route:"/recipes/alerting",children:[{kind:"MdxPage",name:"contact-point",route:"/recipes/alerting/contact-point"},{kind:"MdxPage",name:"endpoint_alert",route:"/recipes/alerting/endpoint_alert"},{kind:"MdxPage",name:"grafana_alerting",route:"/recipes/alerting/grafana_alerting",frontMatter:{sidebar_position:1}},{kind:"MdxPage",name:"log_alert",route:"/recipes/alerting/log_alert"},{kind:"MdxPage",name:"resource_alert",route:"/recipes/alerting/resource_alert"},{kind:"Meta",data:{"contact-point":"Contact Point",endpoint_alert:"Endpoint Alert",grafana_alerting:"Grafana Alerting",log_alert:"Log Alert",resource_alert:"Resource Alert"}}]},{kind:"MdxPage",name:"connecting-to-kubernetes",route:"/recipes/connecting-to-kubernetes"},{kind:"Folder",name:"database-manipulation",route:"/recipes/database-manipulation",children:[{kind:"MdxPage",name:"load-strapi-db-in-local-dev",route:"/recipes/database-manipulation/load-strapi-db-in-local-dev"},{kind:"MdxPage",name:"sync-strapi-db-to-different-env",route:"/recipes/database-manipulation/sync-strapi-db-to-different-env"},{kind:"Meta",data:{"load-strapi-db-in-local-dev":"Load Strapi Db in Local Dev","sync-strapi-db-to-different-env":"Sync Strapi Db to Different Env"}}]},{kind:"MdxPage",name:"debug-cluster-connectivity",route:"/recipes/debug-cluster-connectivity"},{kind:"MdxPage",name:"env-vars-and-secrets",route:"/recipes/env-vars-and-secrets"},{kind:"MdxPage",name:"production-deployment-checklist",route:"/recipes/production-deployment-checklist"},{kind:"MdxPage",name:"sentry-setup",route:"/recipes/sentry-setup"},{kind:"MdxPage",name:"wsl",route:"/recipes/wsl"},{kind:"Meta",data:{alerting:"Alerting","connecting-to-kubernetes":"Connecting to Kubernetes","database-manipulation":"Database Manipulation","debug-cluster-connectivity":"Debug Cluster Connectivity","env-vars-and-secrets":"Env Vars and Secrets","production-deployment-checklist":"Production Deployment Checklist","sentry-setup":"Sentry Setup",wsl:"Wsl"}}]},{kind:"Folder",name:"strapi",route:"/strapi",children:[{kind:"MdxPage",name:"best-practices",route:"/strapi/best-practices"},{kind:"MdxPage",name:"general-concepts",route:"/strapi/general-concepts"},{kind:"MdxPage",name:"setup",route:"/strapi/setup"},{kind:"Meta",data:{"best-practices":"Best Practices","general-concepts":"General Concepts",setup:"Setup"}}]}],headings:[{type:"heading",depth:1,children:[{type:"text",value:"GraphQL",position:{start:{line:1,column:3,offset:2},end:{line:1,column:10,offset:9}}}],position:{start:{line:1,column:1,offset:0},end:{line:1,column:10,offset:9}},value:"GraphQL"},{type:"heading",depth:2,children:[{type:"text",value:"Connecting to GraphQL APIs using GraphQL Codegen",position:{start:{line:7,column:4,offset:424},end:{line:7,column:52,offset:472}}}],position:{start:{line:7,column:1,offset:421},end:{line:7,column:52,offset:472}},value:"Connecting to GraphQL APIs using GraphQL Codegen"},{type:"heading",depth:3,children:[{type:"text",value:"Project setup",position:{start:{line:15,column:5,offset:1040},end:{line:15,column:18,offset:1053}}}],position:{start:{line:15,column:1,offset:1036},end:{line:15,column:18,offset:1053}},value:"Project setup"},{type:"heading",depth:3,children:[{type:"text",value:"Generating and using queries",position:{start:{line:75,column:5,offset:3377},end:{line:75,column:33,offset:3405}}}],position:{start:{line:75,column:1,offset:3373},end:{line:75,column:33,offset:3405}},value:"Generating and using queries"},{type:"heading",depth:2,children:[{type:"text",value:"Using the generated client",position:{start:{line:101,column:4,offset:4157},end:{line:101,column:30,offset:4183}}}],position:{start:{line:101,column:1,offset:4154},end:{line:101,column:30,offset:4183}},value:"Using the generated client"},{type:"heading",depth:3,children:[{type:"text",value:"Error handling",position:{start:{line:157,column:5,offset:5509},end:{line:157,column:19,offset:5523}}}],position:{start:{line:157,column:1,offset:5505},end:{line:157,column:19,offset:5523}},value:"Error handling"},{type:"heading",depth:2,children:[{type:"text",value:"Exploring GraphQL schema",position:{start:{line:163,column:4,offset:5929},end:{line:163,column:28,offset:5953}}}],position:{start:{line:163,column:1,offset:5926},end:{line:163,column:28,offset:5953}},value:"Exploring GraphQL schema"}],flexsearch:{codeblocks:!0}};globalThis.__nextra_internal__={pageMap:c.pageMap,route:c.route};let d="GraphQL";function h(e){let s=Object.assign({h1:"h1",p:"p",a:"a",blockquote:"blockquote",h2:"h2",strong:"strong",h3:"h3",code:"code",div:"div",pre:"pre",span:"span",em:"em"},(0,a.ah)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h1,{children:"GraphQL"}),"\n",(0,t.jsxs)(s.p,{children:["We're using ",(0,t.jsx)(s.a,{href:"https://graphql.org/",children:"GraphQL"})," priarily when talking to our Strapi CMS servers. Read more about getting the Strapi data with GraphQL in general ",(0,t.jsx)(s.a,{href:"https://docs.strapi.io/developer-docs/latest/development/plugins/graphql.html",children:"in their docs"}),"."]}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:["If you are joining an existing project and not setting up a new one, you can jump ahead to ",(0,t.jsx)(s.a,{href:"#generating-and-using-queries",children:"Generating and using queries"})]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"connecting-to-graphql-apis-using-graphql-codegen",children:"Connecting to GraphQL APIs using GraphQL Codegen"}),"\n",(0,t.jsxs)(s.p,{children:["We're using ",(0,t.jsx)(s.a,{href:"https://www.graphql-code-generator.com/",children:"GraphQL Codegen"})," setup to generate typed clients for our gql servers - particularly Strapi CMS."]}),"\n",(0,t.jsxs)(s.p,{children:["We're using ",(0,t.jsx)(s.a,{href:"https://www.graphql-code-generator.com/plugins/typescript/typescript-graphql-request",children:"graphql-request plugin"})]}),"\n",(0,t.jsxs)(s.p,{children:[":::note ",(0,t.jsx)(s.strong,{children:"Note on using graphql-request:"})," at the time of writing there is also apollo-next plugin - the reason we use graphql-request, which is more barebones, is because it did not exist when we were setting this up initially. Apollo-next may be worth a shot with some future project"]}),"\n",(0,t.jsx)(s.h3,{id:"project-setup",children:"Project setup"}),"\n",(0,t.jsxs)(s.p,{children:["Decide where your ",(0,t.jsx)(s.code,{children:".graphql"})," files will live, and where your client & types should be generated. Usually we use ",(0,t.jsx)(s.code,{children:"/graphql/index.ts"})," for the client and ",(0,t.jsx)(s.code,{children:"/graphql/queries/**/*.graphql"})," for both queries and mutations. With this setup, our ",(0,t.jsx)(s.code,{children:"codegen.yml"})," in our frontend (i.e. Nextjs) root looks like this:"]}),"\n",(0,t.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,t.jsx)(s.pre,{children:(0,t.jsxs)(s.code,{"data-language":"text","data-theme":"default",children:[(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'schema: "http://localhost:1337/graphql"'})}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'documents: "./graphql/queries/**/*.{gql,graphql}"'})}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"generates:"})}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  graphql/index.ts:"})}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    plugins:"})}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      - typescript"})}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      - typescript-operations"})}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      - typescript-graphql-request"})})]})})}),"\n",(0,t.jsx)(s.p,{children:"This means we're generating schema against a locally running strapi server."}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsx)(s.p,{children:"This implies we need a running local server to be able to regenerate our gql client - at the time of writing, strapi v4 does not have an easy way to export gql schema. We can use this approach once hey fix it."}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Add the following line into ",(0,t.jsx)(s.code,{children:"package.json"}),":"]}),"\n",(0,t.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,t.jsx)(s.pre,{children:(0,t.jsxs)(s.code,{"data-language":"text","data-theme":"default",children:[(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:' "scripts": {'})}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    ..."})}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'    "gen": "graphql-codegen"'})}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  },"})})]})})}),"\n",(0,t.jsx)(s.p,{children:"and install the following dependencies, both dev and nondev:"}),"\n",(0,t.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,t.jsx)(s.pre,{children:(0,t.jsxs)(s.code,{"data-language":"text","data-theme":"default",children:[(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"yarn add graphql graphql-tag graphql-request"})}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"yarn add -D @graphql-codegen/cli @graphql-codegen/typescript @graphql-codegen/typescript-graphql-request @graphql-codegen/typescript-operations"})})]})})}),"\n",(0,t.jsxs)(s.p,{children:["To use the generated client (sdk) against your graphql server, you need to initialize it, passing in the server endpoint as a parameter. We usually setup a file like ",(0,t.jsx)(s.code,{children:"utils/gql.ts"})," from which we export .the typed client itself The file below deals with different formats of urls being provided from within Kubernetes deployment and local development."]}),"\n",(0,t.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,t.jsx)(s.pre,{children:(0,t.jsxs)(s.code,{"data-language":"ts","data-theme":"default",children:[(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" { getSdk } "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"../graphql/index"'})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" { GraphQLClient } "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"graphql-request"'})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" getConfig "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"next/config"'})]}),"\n",(0,t.jsx)(s.span,{className:"line",children:" "}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" { "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"serverRuntimeConfig"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" } "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"getConfig"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"()"})]}),"\n",(0,t.jsx)(s.span,{className:"line",children:" "}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// URL becomes full url to strapi on server, but just /graphql (for proxy) on client"})}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// all the dealings with protocol are here because we route to a local service address from within k8s and to a full https:// url from local development"})}),"\n",(0,t.jsx)(s.span,{className:"line",children:" "}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"protocol"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"process"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"."}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"env"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"."}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"STRAPI_URL"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"&&"})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  ("}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"process"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"."}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"env"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"."}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"STRAPI_URL"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".startsWith"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"http://"'}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"||"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"process"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"."}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"env"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"."}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"STRAPI_URL"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".startsWith"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"https://"'}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"))"})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"?"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'""'})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"http://"'})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"gql"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"new"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"GraphQLClient"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"`"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"${"})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"process"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"."}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"env"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"."}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"STRAPI_URL"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"?"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"`"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"${"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"protocol"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"}${"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"serverRuntimeConfig"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:".strapiUrl"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"}"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"`"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"window"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"."}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"location"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:".origin"})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"}"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"/graphql`"})]}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"client"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"getSdk"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(gql)"})]})]})})}),"\n",(0,t.jsx)(s.h3,{id:"generating-and-using-queries",children:"Generating and using queries"}),"\n",(0,t.jsxs)(s.p,{children:["You need at least a single valid query among your graphql files for client to generate correctly. Check out ",(0,t.jsx)(s.a,{href:"#exploring-graphql-schema",children:"Exploring GraphQL Schema"})," to find a valid query for your server. Since most of our Strapi V4 instances have a 'pages' model, the following query to get the total amount of pages usually works:"]}),"\n",(0,t.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,t.jsx)(s.pre,{children:(0,t.jsxs)(s.code,{"data-language":"text","data-theme":"default",children:[(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"query TotalPages {"})}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  pages {"})}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    meta {"})}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      pagination {"})}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        total"})}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      }"})}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})})}),"\n",(0,t.jsxs)(s.p,{children:["You can put this query into a ",(0,t.jsx)(s.code,{children:"*.graphql"})," file into ",(0,t.jsx)(s.code,{children:"/graphql/queries"})," directory."]}),"\n",(0,t.jsx)(s.p,{children:"Afterwards, you should be able to run"}),"\n",(0,t.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{"data-language":"text","data-theme":"default",children:(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"yarn gen"})})})})}),"\n",(0,t.jsxs)(s.p,{children:["If everything was setup correctly, this will generate ",(0,t.jsx)(s.code,{children:"graphql/index.ts"})," file with valid types for your schema, as well as a client with a single query - ",(0,t.jsx)(s.code,{children:"client.TotalPages"})]}),"\n",(0,t.jsx)(s.h2,{id:"using-the-generated-client",children:"Using the generated client"}),"\n",(0,t.jsx)(s.p,{children:"Continuing from previous example, if you import which will will return the following data:"}),"\n",(0,t.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,t.jsx)(s.pre,{children:(0,t.jsxs)(s.code,{"data-language":"ts","data-theme":"default",children:[(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" { client } "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"../utils/gql"'})]}),"\n",(0,t.jsx)(s.span,{className:"line",children:" "}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// ..."})}),"\n",(0,t.jsx)(s.span,{className:"line",children:" "}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"data"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"client"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".TotalPages"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"()"})]}),"\n",(0,t.jsx)(s.span,{className:"line",children:" "}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"/* "})}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"  if successful, data will look as follows:"})}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"  data = {"})}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"    pages {"})}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"      meta {"})}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"        pagination {"})}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"          total: 358 // the actual number will differ"})}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"        }"})}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"      }"})}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"    }"})}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"  }"})}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"*/"})})]})})}),"\n",(0,t.jsxs)(s.p,{children:["In next.js, you often do this inside ",(0,t.jsx)(s.code,{children:"getStaticProps"})," or ",(0,t.jsx)(s.code,{children:"getServerSideProps"}),":"]}),"\n",(0,t.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,t.jsx)(s.pre,{children:(0,t.jsxs)(s.code,{"data-language":"ts","data-theme":"default",children:[(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"getStaticProps"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"GetStaticProps"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"async"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" (ctx) "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// ..."})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" { "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"pages"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" } "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"client"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".TotalPages"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"()"})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    props"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      totalPages"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"pages"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"."}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"meta"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"."}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"pagination"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:".total"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})})}),"\n",(0,t.jsxs)(s.p,{children:["If you do this from frontend (loading data from within a React component), you likely want to wrap the client call in something like ",(0,t.jsx)(s.a,{href:"https://swr.vercel.app/",children:"SWR"}),", ",(0,t.jsx)(s.a,{href:"https://react-query-v3.tanstack.com/overview",children:"React-Query"}),", or just ",(0,t.jsx)(s.code,{children:"useEffect"}),". With SWR it looks like this:"]}),"\n",(0,t.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,t.jsx)(s.pre,{children:(0,t.jsxs)(s.code,{"data-language":"ts","data-theme":"default",children:[(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"MyComponent"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" () "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" { "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"data"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"error"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" } "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"useSWR"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"TotalPagesQuery"'}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" () "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"client"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".TotalPages"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"())"})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"isLoading"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"!"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"data "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"&&"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"!"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"error"})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ("})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    <"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"div"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:">"})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      Total pages count"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"{"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'" "'}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      {isLoading ? "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Loading"'}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" : error ? "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Error!"'}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" : data.pages.meta.pagination.total}"})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"</"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"div"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  )"})}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})})}),"\n",(0,t.jsx)(s.p,{children:"Read more in SWR/ReactQuery docs on handling params and other."}),"\n",(0,t.jsx)(s.h3,{id:"error-handling",children:"Error handling"}),"\n",(0,t.jsxs)(s.p,{children:["If there's error on ",(0,t.jsx)(s.em,{children:"any node"})," of the result, the whole request will throw. You likely want it wrapped in a try-catch block."]}),"\n",(0,t.jsxs)(s.p,{children:["This can be dealt with differently (and often should be - so that one missing piece of data does not break your whole page) - read more in the ",(0,t.jsx)(s.a,{href:"https://github.com/prisma-labs/graphql-request",children:"docs of the graphql-request"})," and the codegen graphql-request plugin linked above."]}),"\n",(0,t.jsx)(s.h2,{id:"exploring-graphql-schema",children:"Exploring GraphQL schema"}),"\n",(0,t.jsxs)(s.p,{children:["You can use ",(0,t.jsx)(s.a,{href:"https://github.com/bratislava/graphiql-explorer-example",children:"our fork"})," of the ",(0,t.jsx)(s.a,{href:"https://github.com/OneGraph/graphiql-explorer-example",children:"OneGraph GraphiQL Explorer"})," to browse any GraphQL endpoint. In our case it's usually an endpoint of a Strapi instance. The only thing our fork adds is easy configuration of the endpoint via ",(0,t.jsx)(s.code,{children:".env"}),"."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.a,{href:"https://api.spacex.land/graphql/",children:"A quick example exploring SpaceX data here"})})}),"\n",(0,t.jsx)(s.p,{children:"You can use the left panel to easily explore through all of the options provided by the api, and use the params to control filtering/sorting/pagination."})]})}function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,a.ah)(),e.components);return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}c.title="string"==typeof d&&d||"GraphQL";let x=e=>(0,t.jsx)(o.mK.Provider,{value:e,children:(0,t.jsx)(p,{})});(r=globalThis).__nextra_pageContext__||(r.__nextra_pageContext__=Object.create(null)),globalThis.__nextra_pageContext__["/graphql"]={Content:x,pageOpts:c,themeConfig:i.Z}}},function(e){e.O(0,[9774,5860,2888,179],function(){return e(e.s=4146)}),_N_E=e.O()}]);