(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[269],{5049:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/meilisearch",function(){return n(3878)}])},3957:function(e,s,n){"use strict";var l=n(5893);n(7294);let i={logo:(0,l.jsx)("span",{children:"\uD83D\uDCDA Bratislava Documentation"}),project:{link:"https://github.com/bratislava"},docsRepositoryBase:"https://github.com/bratislava/bratislava.github.io",sidebar:{defaultMenuCollapseLevel:0},footer:{text:"Department of Innovation and Technology of the City of Bratislava"},faviconGlyph:"\uD83D\uDCDA"};s.Z=i},3878:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return c.ZP}});var l,i=n(5893),a=n(2720),r=n(3957);n(5513);var t=n(1151);n(5675);var c=n(1235);let o={filePath:"pages/meilisearch.md",route:"/meilisearch",frontMatter:{},pageMap:[{kind:"Meta",data:{index:"Introduction",onboarding:"Onboarding","-- Web development --":{type:"separator"},strapi:"Strapi",graphql:"GraphQL",meilisearch:"Meilisearch","project-specific":"Project specific","-- Others --":{type:"separator"},"deployment-and-infrastructure":"Deployment and Infrastructure",nestjs:"Nestjs",recipes:"Recipes"}},{kind:"Folder",name:"deployment-and-infrastructure",route:"/deployment-and-infrastructure",children:[{kind:"MdxPage",name:"backups",route:"/deployment-and-infrastructure/backups"},{kind:"MdxPage",name:"database-backups",route:"/deployment-and-infrastructure/database-backups"},{kind:"MdxPage",name:"deployment",route:"/deployment-and-infrastructure/deployment"},{kind:"MdxPage",name:"grafana",route:"/deployment-and-infrastructure/grafana"},{kind:"Meta",data:{backups:"Backups","database-backups":"Database Backups",deployment:"Deployment",grafana:"Grafana"}}]},{kind:"MdxPage",name:"graphql",route:"/graphql"},{kind:"MdxPage",name:"index",route:"/",frontMatter:{sidebar_position:1}},{kind:"MdxPage",name:"meilisearch",route:"/meilisearch"},{kind:"Folder",name:"nestjs",route:"/nestjs",children:[{kind:"MdxPage",name:"Authentication",route:"/nestjs/Authentication"},{kind:"MdxPage",name:"CardWebPay",route:"/nestjs/CardWebPay"},{kind:"MdxPage",name:"Controllers",route:"/nestjs/Controllers"},{kind:"MdxPage",name:"Kubernetes",route:"/nestjs/Kubernetes"},{kind:"MdxPage",name:"Logging",route:"/nestjs/Logging"},{kind:"MdxPage",name:"Module",route:"/nestjs/Module"},{kind:"MdxPage",name:"NestJS",route:"/nestjs/NestJS",frontMatter:{sidebar_position:1}},{kind:"MdxPage",name:"OpenAPI",route:"/nestjs/OpenAPI"},{kind:"MdxPage",name:"Prisma",route:"/nestjs/Prisma"},{kind:"MdxPage",name:"ProjectStructure",route:"/nestjs/ProjectStructure"},{kind:"MdxPage",name:"RestApi",route:"/nestjs/RestApi"},{kind:"MdxPage",name:"Sentry",route:"/nestjs/Sentry"},{kind:"MdxPage",name:"Services",route:"/nestjs/Services"},{kind:"MdxPage",name:"Testing",route:"/nestjs/Testing"},{kind:"Meta",data:{Authentication:"Authentication",CardWebPay:"Cardwebpay",Controllers:"Controllers",Kubernetes:"Kubernetes",Logging:"Logging",Module:"Module",NestJS:"Nestjs",OpenAPI:"Openapi",Prisma:"Prisma",ProjectStructure:"Projectstructure",RestApi:"Restapi",Sentry:"Sentry",Services:"Services",Testing:"Testing"}}]},{kind:"Folder",name:"onboarding",route:"/onboarding",children:[{kind:"Folder",name:"setup-and-access",route:"/onboarding/setup-and-access",children:[{kind:"MdxPage",name:"developer-accesses",route:"/onboarding/setup-and-access/developer-accesses"},{kind:"MdxPage",name:"docker-setup",route:"/onboarding/setup-and-access/docker-setup"},{kind:"MdxPage",name:"editor-setup",route:"/onboarding/setup-and-access/editor-setup"},{kind:"MdxPage",name:"kubernetes-lens-setup",route:"/onboarding/setup-and-access/kubernetes-lens-setup"},{kind:"MdxPage",name:"postgres-setup",route:"/onboarding/setup-and-access/postgres-setup"},{kind:"Meta",data:{"developer-accesses":"Developer Accesses","docker-setup":"Docker Setup","editor-setup":"Editor Setup","kubernetes-lens-setup":"Kubernetes Lens Setup","postgres-setup":"Postgres Setup"}}]},{kind:"Folder",name:"workflows",route:"/onboarding/workflows",children:[{kind:"MdxPage",name:"git-workflow",route:"/onboarding/workflows/git-workflow"},{kind:"MdxPage",name:"meetings-syncs-rituals",route:"/onboarding/workflows/meetings-syncs-rituals"},{kind:"Meta",data:{"git-workflow":"Git Workflow","meetings-syncs-rituals":"Meetings Syncs Rituals"}}]}]},{kind:"Folder",name:"project-specific",route:"/project-specific",children:[{kind:"Folder",name:"bratislava.sk",route:"/project-specific/bratislava.sk",children:[{kind:"MdxPage",name:"add-new-component-to-sections",route:"/project-specific/bratislava.sk/add-new-component-to-sections"},{kind:"MdxPage",name:"colors-and-themes",route:"/project-specific/bratislava.sk/colors-and-themes"},{kind:"MdxPage",name:"forms-general",route:"/project-specific/bratislava.sk/forms-general"},{kind:"MdxPage",name:"forms-uischema",route:"/project-specific/bratislava.sk/forms-uischema"},{kind:"MdxPage",name:"forms-upload-file",route:"/project-specific/bratislava.sk/forms-upload-file"},{kind:"MdxPage",name:"meilisearch-setup",route:"/project-specific/bratislava.sk/meilisearch-setup"},{kind:"MdxPage",name:"react-component-structure",route:"/project-specific/bratislava.sk/react-component-structure"},{kind:"Meta",data:{"add-new-component-to-sections":"Add New Component to Sections","colors-and-themes":"Colors and Themes","forms-general":"Forms General","forms-uischema":"Forms Uischema","forms-upload-file":"Forms Upload File","meilisearch-setup":"Meilisearch Setup","react-component-structure":"React Component Structure"}}]}]},{kind:"Folder",name:"recipes",route:"/recipes",children:[{kind:"Folder",name:"alerting",route:"/recipes/alerting",children:[{kind:"MdxPage",name:"contact-point",route:"/recipes/alerting/contact-point"},{kind:"MdxPage",name:"endpoint_alert",route:"/recipes/alerting/endpoint_alert"},{kind:"MdxPage",name:"grafana_alerting",route:"/recipes/alerting/grafana_alerting",frontMatter:{sidebar_position:1}},{kind:"MdxPage",name:"log_alert",route:"/recipes/alerting/log_alert"},{kind:"MdxPage",name:"resource_alert",route:"/recipes/alerting/resource_alert"},{kind:"Meta",data:{"contact-point":"Contact Point",endpoint_alert:"Endpoint Alert",grafana_alerting:"Grafana Alerting",log_alert:"Log Alert",resource_alert:"Resource Alert"}}]},{kind:"MdxPage",name:"connecting-to-kubernetes",route:"/recipes/connecting-to-kubernetes"},{kind:"Folder",name:"database-manipulation",route:"/recipes/database-manipulation",children:[{kind:"MdxPage",name:"load-strapi-db-in-local-dev",route:"/recipes/database-manipulation/load-strapi-db-in-local-dev"},{kind:"MdxPage",name:"sync-strapi-db-to-different-env",route:"/recipes/database-manipulation/sync-strapi-db-to-different-env"},{kind:"Meta",data:{"load-strapi-db-in-local-dev":"Load Strapi Db in Local Dev","sync-strapi-db-to-different-env":"Sync Strapi Db to Different Env"}}]},{kind:"MdxPage",name:"debug-cluster-connectivity",route:"/recipes/debug-cluster-connectivity"},{kind:"MdxPage",name:"env-vars-and-secrets",route:"/recipes/env-vars-and-secrets"},{kind:"MdxPage",name:"production-deployment-checklist",route:"/recipes/production-deployment-checklist"},{kind:"MdxPage",name:"sentry-setup",route:"/recipes/sentry-setup"},{kind:"MdxPage",name:"wsl",route:"/recipes/wsl"},{kind:"Meta",data:{alerting:"Alerting","connecting-to-kubernetes":"Connecting to Kubernetes","database-manipulation":"Database Manipulation","debug-cluster-connectivity":"Debug Cluster Connectivity","env-vars-and-secrets":"Env Vars and Secrets","production-deployment-checklist":"Production Deployment Checklist","sentry-setup":"Sentry Setup",wsl:"Wsl"}}]},{kind:"Folder",name:"strapi",route:"/strapi",children:[{kind:"MdxPage",name:"best-practices",route:"/strapi/best-practices"},{kind:"MdxPage",name:"general-concepts",route:"/strapi/general-concepts"},{kind:"MdxPage",name:"setup",route:"/strapi/setup"},{kind:"Meta",data:{"best-practices":"Best Practices","general-concepts":"General Concepts",setup:"Setup"}}]}],headings:[{type:"heading",depth:1,children:[{type:"text",value:"Meilisearch",position:{start:{line:1,column:3,offset:2},end:{line:1,column:14,offset:13}}}],position:{start:{line:1,column:1,offset:0},end:{line:1,column:14,offset:13}},value:"Meilisearch"},{type:"heading",depth:2,children:[{type:"text",value:"Meilisearch instance setup",position:{start:{line:5,column:4,offset:242},end:{line:5,column:30,offset:268}}}],position:{start:{line:5,column:1,offset:239},end:{line:5,column:30,offset:268}},value:"Meilisearch instance setup"},{type:"heading",depth:3,children:[{type:"text",value:"Running Meilisearch instance locally",position:{start:{line:9,column:5,offset:406},end:{line:9,column:41,offset:442}}}],position:{start:{line:9,column:1,offset:402},end:{line:9,column:41,offset:442}},value:"Running Meilisearch instance locally"},{type:"heading",depth:3,children:[{type:"text",value:"Running the Meilisearch instance in Kubernetes",position:{start:{line:42,column:5,offset:1350},end:{line:42,column:51,offset:1396}}}],position:{start:{line:42,column:1,offset:1346},end:{line:42,column:51,offset:1396}},value:"Running the Meilisearch instance in Kubernetes"},{type:"heading",depth:4,children:[{type:"text",value:"Environment setup",position:{start:{line:204,column:6,offset:5327},end:{line:204,column:23,offset:5344}}}],position:{start:{line:204,column:1,offset:5322},end:{line:204,column:23,offset:5344}},value:"Environment setup"},{type:"heading",depth:2,children:[{type:"text",value:"Getting the search and admin keys",position:{start:{line:253,column:4,offset:6863},end:{line:253,column:37,offset:6896}}}],position:{start:{line:253,column:1,offset:6860},end:{line:253,column:37,offset:6896}},value:"Getting the search and admin keys"},{type:"heading",depth:2,children:[{type:"text",value:"Setting up new index",position:{start:{line:270,column:4,offset:7288},end:{line:270,column:24,offset:7308}}}],position:{start:{line:270,column:1,offset:7285},end:{line:270,column:24,offset:7308}},value:"Setting up new index"},{type:"heading",depth:3,children:[{type:"text",value:"Manual indexing",position:{start:{line:274,column:5,offset:7372},end:{line:274,column:20,offset:7387}}}],position:{start:{line:274,column:1,offset:7368},end:{line:274,column:20,offset:7387}},value:"Manual indexing"},{type:"heading",depth:3,children:[{type:"text",value:"Connecting Strapi to Meilisearch",position:{start:{line:278,column:5,offset:7476},end:{line:278,column:37,offset:7508}}}],position:{start:{line:278,column:1,offset:7472},end:{line:278,column:37,offset:7508}},value:"Connecting Strapi to Meilisearch"},{type:"heading",depth:4,children:[{type:"text",value:"Localization solution",position:{start:{line:308,column:6,offset:8543},end:{line:308,column:27,offset:8564}}}],position:{start:{line:308,column:1,offset:8538},end:{line:308,column:27,offset:8564}},value:"Localization solution"},{type:"heading",depth:2,children:[{type:"text",value:"Additional settings",position:{start:{line:345,column:4,offset:9363},end:{line:345,column:23,offset:9382}}}],position:{start:{line:345,column:1,offset:9360},end:{line:345,column:23,offset:9382}},value:"Additional settings"},{type:"heading",depth:2,children:[{type:"text",value:"Accessing search functionality",position:{start:{line:349,column:4,offset:9526},end:{line:349,column:34,offset:9556}}}],position:{start:{line:349,column:1,offset:9523},end:{line:349,column:34,offset:9556}},value:"Accessing search functionality"}],flexsearch:{codeblocks:!0}};globalThis.__nextra_internal__={pageMap:o.pageMap,route:o.route};let h="Meilisearch";function d(e){let s=Object.assign({h1:"h1",p:"p",a:"a",h2:"h2",blockquote:"blockquote",h3:"h3",code:"code",div:"div",pre:"pre",span:"span",h4:"h4",ul:"ul",li:"li",strong:"strong"},(0,t.ah)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.h1,{children:"Meilisearch"}),"\n",(0,i.jsxs)(s.p,{children:["We use meilisearch for all kinds of searching - often simply through ",(0,i.jsx)(s.a,{href:"https://github.com/meilisearch/strapi-plugin-meilisearch",children:"meilisearch-strapi-plugin"})," (read below), but in the future also to scrape the library catalog."]}),"\n",(0,i.jsx)(s.h2,{id:"meilisearch-instance-setup",children:"Meilisearch instance setup"}),"\n",(0,i.jsxs)(s.blockquote,{children:["\n",(0,i.jsx)(s.p,{children:"Important - there might be custom index/search setup for each project - that should be covered in project-specific documentation"}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"running-meilisearch-instance-locally",children:"Running Meilisearch instance locally"}),"\n",(0,i.jsxs)(s.p,{children:["For local development, we often use docker compose. The easiest way to add local meilisearch instance to your app is to add it as service to ",(0,i.jsx)(s.code,{children:"docker-compose.yml"})," file as you can see bellow."]}),"\n",(0,i.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,i.jsx)(s.pre,{children:(0,i.jsxs)(s.code,{"data-language":"text","data-theme":"default",children:[(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"services:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  ..."})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  meilisearch:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    image: getmeili/meilisearch:v0.28"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    environment:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      - http_proxy"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      - https_proxy"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      - MEILI_MASTER_KEY=YOUR_MASTER_KEY"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      - MEILI_NO_ANALYTICS=true"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      - MEILI_ENV=development"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      - MEILI_LOG_LEVEL"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      - MEILI_DB_PATH=/data.ms"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    ports:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      - 7700:7700"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    expose:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      - '7700'"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    volumes:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      - ./meilisearch/data.ms:/data.ms"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    restart: unless-stopped"})})]})})}),"\n",(0,i.jsxs)(s.p,{children:[":::caution\nDon't forget to add ",(0,i.jsx)(s.code,{children:"meilisearch"})," folder to your ",(0,i.jsx)(s.code,{children:".gitignore"})," file so it's get ignored.\n:::"]}),"\n",(0,i.jsxs)(s.p,{children:["For more information about meilisearch, please read ",(0,i.jsx)(s.a,{href:"https://docs.meilisearch.com/learn/getting_started/quick_start.html#setup-and-installation",children:"the official meilisearch docs"}),"."]}),"\n",(0,i.jsx)(s.h3,{id:"running-the-meilisearch-instance-in-kubernetes",children:"Running the Meilisearch instance in Kubernetes"}),"\n",(0,i.jsxs)(s.blockquote,{children:["\n",(0,i.jsx)(s.p,{children:"Note: This section needs to be verified, info might be missing or incorrect"}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["You can setup everything relating to your instance using kustomize. Presently this setup tends to be clumped with ",(0,i.jsx)(s.code,{children:"strapi"})," kustomize files, so in the paths below we're always referencing such existing ",(0,i.jsx)(s.code,{children:"strapi"})," setup."]}),"\n",(0,i.jsx)(s.p,{children:"Create the following files:"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.code,{children:"kubernetes/base/service-meilisearch.yml"})}),"\n",(0,i.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,i.jsx)(s.pre,{children:(0,i.jsxs)(s.code,{"data-language":"text","data-theme":"default",children:[(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"apiVersion: v1"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"kind: Service"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"metadata:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  name: ${BUILD_REPOSITORY_NAME}-meilisearch"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  namespace: ${NAMESPACE}"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"spec:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  type: ClusterIP"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  ports:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    - name: internal"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      port: 7700"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      targetPort: http"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      protocol: TCP"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    - name: external"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      port: 80"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      targetPort: 7700"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      protocol: TCP"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  selector:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    service: meilisearch"})})]})})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.code,{children:"kubernetes/base/stateful-set-meilisearch.yml"})}),"\n",(0,i.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,i.jsx)(s.pre,{children:(0,i.jsxs)(s.code,{"data-language":"text","data-theme":"default",children:[(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"apiVersion: apps/v1"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"kind: StatefulSet"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"metadata:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  name: ${BUILD_REPOSITORY_NAME}-meilisearch"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  namespace: ${NAMESPACE}"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  labels:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    service: meilisearch"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"spec:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  selector:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    matchLabels:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      app: meilisearch"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  replicas: 1"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  serviceName: ${BUILD_REPOSITORY_NAME}-meilisearch"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  template:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    metadata:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      labels:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        service: meilisearch"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    spec:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      containers:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        - name: meilisearch"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'          image: "getmeili/meilisearch:v0.28.0"'})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          imagePullPolicy: IfNotPresent"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          envFrom:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            - configMapRef:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"                name: ${BUILD_REPOSITORY_NAME}-meilisearch"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            - secretRef:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"                name: ${BUILD_REPOSITORY_NAME}-meilisearch-secret"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          ports:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            - name: http"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"              containerPort: 7700"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"              protocol: TCP"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          livenessProbe:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            httpGet:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"              path: /health"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"              port: http"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            periodSeconds: 60"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            initialDelaySeconds: 60"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          readinessProbe:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            httpGet:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"              path: /health"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"              port: http"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            periodSeconds: 60"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            initialDelaySeconds: 60"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          volumeMounts:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            - name: ${BUILD_REPOSITORY_NAME}-meilisearch-data-storage"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"              mountPath: /meili_data"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          resources: {}"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  volumeClaimTemplates:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    - metadata:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        name: ${BUILD_REPOSITORY_NAME}-meilisearch-data-storage"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        labels:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          service: meilisearch"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      spec:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'        accessModes: ["ReadWriteOnce"]'})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        resources:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          requests:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            storage: 10Gi"})})]})})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.code,{children:"kubernetes/base/ingress.yml"})}),"\n",(0,i.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,i.jsx)(s.pre,{children:(0,i.jsxs)(s.code,{"data-language":"text","data-theme":"default",children:[(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"apiVersion: networking.k8s.io/v1"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"kind: Ingress"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"metadata:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  name: ${BUILD_REPOSITORY_NAME}-ingress"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  namespace: ${NAMESPACE}"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  labels:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    service: app"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  annotations:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    cert-manager.io/cluster-issuer: letsencrypt"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'    cert-manager.io/issue-temporary-certificate: "true"'})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    kubernetes.io/ingress.class: haproxy"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"spec:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  tls:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    - hosts:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        - ${HOSTNAME}"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        - ${BUILD_REPOSITORY_NAME}-meilisearch.${DEPLOYMENT_ENV}bratislava.sk"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      secretName: ${BUILD_REPOSITORY_NAME}-tls"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  rules:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    - host: ${HOSTNAME}"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      http:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        paths:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          - path: /"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            pathType: ImplementationSpecific"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            backend:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"              service:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"                name: ${BUILD_REPOSITORY_NAME}-app"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"                port:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"                  number: 80"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    - host: ${BUILD_REPOSITORY_NAME}-meilisearch.${DEPLOYMENT_ENV}bratislava.sk"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      http:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        paths:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          - path: /"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            pathType: ImplementationSpecific"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            backend:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"              service:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"                name: ${BUILD_REPOSITORY_NAME}-meilisearch"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"                port:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"                  number: 80"})})]})})}),"\n",(0,i.jsxs)(s.p,{children:["Add following to ",(0,i.jsx)(s.code,{children:"kubernetes/base/kustomization.yml"})]}),"\n",(0,i.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,i.jsx)(s.pre,{children:(0,i.jsxs)(s.code,{"data-language":"text","data-theme":"default",children:[(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"resources: ..."})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  - ingress.yml"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  - stateful-set-meilisearch.yml"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  - service-meilisearch.yml"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"configMapGenerator:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  - name: ${BUILD_REPOSITORY_NAME}-meilisearch"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    namespace: ${NAMESPACE}"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    envs:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      - .meilisearch.env"})})]})})}),"\n",(0,i.jsxs)(s.p,{children:["And to ",(0,i.jsx)(s.code,{children:"deployment.yml"})]}),"\n",(0,i.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,i.jsx)(s.pre,{children:(0,i.jsxs)(s.code,{"data-language":"text","data-theme":"default",children:[(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  ..."})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  envFrom:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    - secretRef:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        name: ${BUILD_REPOSITORY_NAME}-meilisearch-secret"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    - configMapRef:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        name: ${BUILD_REPOSITORY_NAME}-meilisearch"})})]})})}),"\n",(0,i.jsx)(s.h4,{id:"environment-setup",children:"Environment setup"}),"\n",(0,i.jsx)(s.p,{children:"You'll want to setup a meilisearch master key as a secret (check out the section on env vars & secrets), you can see the secret reference above already. The sealed secret file will looks something like this:"}),"\n",(0,i.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,i.jsx)(s.pre,{children:(0,i.jsxs)(s.code,{"data-language":"text","data-theme":"default",children:[(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"apiVersion: bitnami.com/v1alpha1"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"kind: SealedSecret"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"metadata:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  annotations:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'    sealedsecrets.bitnami.com/namespace-wide: "true"'})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  creationTimestamp: null"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  name: <your-prefix>-meilisearch-secret"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  namespace: standalone"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"spec:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  encryptedData:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    MEILI_MASTER_KEY: YOUR_BASE_64_ENCODED_KEY"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  template:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    data: null"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    metadata:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      annotations:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'        sealedsecrets.bitnami.com/namespace-wide: "true"'})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      creationTimestamp: null"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      name: <your-prefix>-meilisearch-secret"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      namespace: standalone"})})]})})}),"\n",(0,i.jsxs)(s.blockquote,{children:["\n",(0,i.jsx)(s.p,{children:"This is different from the search secret you'll be using to query meilisearch data, and should preferably be different from your admin secret as well, so that you can later swap it painlessly"}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["Along with an appropriate ",(0,i.jsx)(s.code,{children:".meilisearch.env"})," file for non-secret setup, usually residing at ",(0,i.jsx)(s.code,{children:"kubernetes/base/.meilisearch.env"})]}),"\n",(0,i.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,i.jsx)(s.pre,{children:(0,i.jsxs)(s.code,{"data-language":"text","data-theme":"default",children:[(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"MEILI_ENV=production"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"MEILI_NO_ANALYTICS=true"})})]})})}),"\n",(0,i.jsxs)(s.p,{children:["Setting ",(0,i.jsx)(s.code,{children:"MEILI_ENV"})," to ",(0,i.jsx)(s.code,{children:"development"})," serves a gui with search console by the meili server."]}),"\n",(0,i.jsxs)(s.p,{children:["In case you have also separate ",(0,i.jsx)(s.code,{children:".meilisearch.env"})," files for each environment, reference the correct one in ",(0,i.jsx)(s.code,{children:"kubernetes/envs/<env>/kustommization.yml"})]}),"\n",(0,i.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,i.jsx)(s.pre,{children:(0,i.jsxs)(s.code,{"data-language":"text","data-theme":"default",children:[(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"configMapGenerator:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  ..."})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  - name: ${BUILD_REPOSITORY_NAME}-meilisearch"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    namespace: ${NAMESPACE}"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    behavior: merge"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    envs:"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      - .meilisearch.env"})})]})})}),"\n",(0,i.jsx)(s.h2,{id:"getting-the-search-and-admin-keys",children:"Getting the search and admin keys"}),"\n",(0,i.jsx)(s.p,{children:"Get the keys."}),"\n",(0,i.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,i.jsx)(s.pre,{children:(0,i.jsxs)(s.code,{"data-language":"bash","data-theme":"default",children:[(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"curl --request GET \\"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  --url http://your-meili-url/keys \\"})}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  --header "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Authorization: Bearer YOUR_MASTER_KEY'"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  --header "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Content-Type: application/json'"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" json_pp"})]})]})})}),"\n",(0,i.jsxs)(s.p,{children:["Set admin key and host in Strapi meilisearch plugin settings, e.g. ",(0,i.jsx)(s.code,{children:"bratislava-strapi-meilisearch:7700"})," for host."]}),"\n",(0,i.jsx)(s.p,{children:"Add search key an host to Next env variables."}),"\n",(0,i.jsx)(s.p,{children:"More info in meilisearch docs."}),"\n",(0,i.jsx)(s.h2,{id:"setting-up-new-index",children:"Setting up new index"}),"\n",(0,i.jsx)(s.p,{children:"Before you can search your data, you need to index them."}),"\n",(0,i.jsx)(s.h3,{id:"manual-indexing",children:"Manual indexing"}),"\n",(0,i.jsx)(s.p,{children:"For manual indexing, follow the Meilisearch docs. We don't really do this here..."}),"\n",(0,i.jsx)(s.h3,{id:"connecting-strapi-to-meilisearch",children:"Connecting Strapi to Meilisearch"}),"\n",(0,i.jsxs)(s.p,{children:["Today our Strapi indexes are setup and filled with GUI using ",(0,i.jsx)(s.a,{href:"https://github.com/meilisearch/strapi-plugin-meilisearch",children:"meilisearch-strapi-plugin"}),"."]}),"\n",(0,i.jsxs)(s.p,{children:["The original plugin deals only with the primary locale. A one-liner change makes it index all of the locales, but these will then be clumped together. Because of that, we are using ",(0,i.jsx)(s.a,{href:"https://github.com/bratislava/strapi-plugin-meilisearch",children:"our own fork"})," of ",(0,i.jsx)(s.a,{href:"https://github.com/meilisearch/strapi-plugin-meilisearch",children:"meilisearch-strapi-plugin"}),"."]}),"\n",(0,i.jsx)(s.p,{children:"You can install it using:"}),"\n",(0,i.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{"data-language":"bash","data-theme":"default",children:(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"yarn add https://github.com/bratislava/strapi-plugin-meilisearch.git"})})})})}),"\n",(0,i.jsxs)(s.p,{children:["Then you can add your configuration into ",(0,i.jsx)(s.code,{children:"config/plugins.ts"})," or ",(0,i.jsx)(s.code,{children:"config/plugins.js"}),"."]}),"\n",(0,i.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,i.jsx)(s.pre,{children:(0,i.jsxs)(s.code,{"data-language":"ts","data-theme":"default",children:[(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"default"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"..."})]}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  meilisearch: {"})}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    config"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      host"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"process"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"."}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"env"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"."}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"MEILISEARCH_HOST"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      apiKey"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"process"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"."}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"env"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"."}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"MEILISEARCH_ADMIN_API_KEY"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  }"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})})}),"\n",(0,i.jsx)(s.p,{children:":::note\nEvery project has it's own environment handling (which is often slightly different between projects), so make sure you have your variables set properly.\n:::"}),"\n",(0,i.jsx)(s.h4,{id:"localization-solution",children:"Localization solution"}),"\n",(0,i.jsx)(s.p,{children:"For every strapi collection that is both localized and should be searchable you have to set locale as filterableAttribute."}),"\n",(0,i.jsxs)(s.p,{children:["Here is an example for ",(0,i.jsx)(s.code,{children:"event"})," collection:"]}),"\n",(0,i.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,i.jsx)(s.pre,{children:(0,i.jsxs)(s.code,{"data-language":"ts","data-theme":"default",children:[(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"default"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"..."})]}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  meilisearch: {"})}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    config"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"..."})]}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      event: {"})}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        settings"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"          filterableAttributes"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ["}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'locale'"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"]"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        }"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      }"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  }"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})})}),"\n",(0,i.jsx)(s.p,{children:"Afterwards, after Strapi restart and rehooking updated collections in UI you can filter by locale so that your results don't get mixed up, like so:"}),"\n",(0,i.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,i.jsx)(s.pre,{children:(0,i.jsxs)(s.code,{"data-language":"bash","data-theme":"default",children:[(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"curl --request POST \\"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  --url https://your-meili-url/indexes/your-index-name/search \\"})}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  --header "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Authorization: Bearer YOUR_SEARCH_TOKEN'"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  --header "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Content-Type: application/json'"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  --data "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'{"})]}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'	"q": "Youth",'})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'	"filter": ["locale = en"]'})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"}'"})})]})})}),"\n",(0,i.jsx)(s.p,{children:"More info in meilisearch docs."}),"\n",(0,i.jsx)(s.h2,{id:"additional-settings",children:"Additional settings"}),"\n",(0,i.jsxs)(s.p,{children:["Just like with ",(0,i.jsx)(s.code,{children:"filterableAttributes"}),", you can further configure your indexes (i.e. add sortableAttributes) - check out meilisearch docs."]}),"\n",(0,i.jsx)(s.h2,{id:"accessing-search-functionality",children:"Accessing search functionality"}),"\n",(0,i.jsx)(s.p,{children:"When you have your indexes setup (using strapi plugin or manually), you can search them using the following"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"debug"})," using either Postman or by accessing the dev gui served by the meilisearch instance in dev mode"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"frontend/backend"})," using the ",(0,i.jsx)(s.a,{href:"https://github.com/meilisearch/meilisearch-js",children:"meilisearch-js sdk"})]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Check out Meilisearch pages/github before delving into custom integrations, as they provide & maintain, including embedable search bars and scrapers."})]})}function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,t.ah)(),e.components);return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}o.title="string"==typeof h&&h||"Meilisearch";let x=e=>(0,i.jsx)(a.mK.Provider,{value:e,children:(0,i.jsx)(p,{})});(l=globalThis).__nextra_pageContext__||(l.__nextra_pageContext__=Object.create(null)),globalThis.__nextra_pageContext__["/meilisearch"]={Content:x,pageOpts:o,themeConfig:r.Z}}},function(e){e.O(0,[9774,5860,2888,179],function(){return e(e.s=5049)}),_N_E=e.O()}]);