(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[745],{9707:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/bratislava.sk/meilisearch-setup",function(){return n(585)}])},3957:function(e,s,n){"use strict";var t=n(5893);n(7294);let a={logo:(0,t.jsx)("span",{children:"\uD83D\uDCDA Bratislava Documentation"}),project:{link:"https://github.com/bratislava"},docsRepositoryBase:"https://github.com/bratislava/bratislava.github.io",footer:{text:"Department of Innovation and Technology of the City of Bratislava"},faviconGlyph:"\uD83D\uDCDA"};s.Z=a},585:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return p.ZP}});var t,a=n(5893),r=n(2720),i=n(3957);n(5513);var o=n(1151),l=n(5675),c=n.n(l),d={src:"/_next/static/media/meili-plugin.ce2e6734.png",height:902,width:1914,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAEBAMAAABB42PDAAAAJFBMVEX+/v7+/v39/f79/f38/f38/P78/P38/Pz7+/z6+v34+Pv4+Po3d2+5AAAAHElEQVR42mPYzuAQybCMyTCSIYMhMZKBgyE5EgAwagRpqvllhgAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:4},p=n(1235);let h={filePath:"pages/bratislava.sk/meilisearch-setup.md",route:"/bratislava.sk/meilisearch-setup",frontMatter:{},pageMap:[{kind:"Meta",data:{index:"Introduction","bratislava.sk":"Bratislava.sk","deployment-and-infrastructure":"Deployment and Infrastructure",graphql:"GraphQL",meilisearch:"Meilisearch",nestjs:"Nestjs",other:"Other",recipes:"Recipes",strapi:"Strapi"}},{kind:"Folder",name:"bratislava.sk",route:"/bratislava.sk",children:[{kind:"MdxPage",name:"add-new-component-to-sections",route:"/bratislava.sk/add-new-component-to-sections"},{kind:"MdxPage",name:"colors-and-themes",route:"/bratislava.sk/colors-and-themes"},{kind:"MdxPage",name:"forms-general",route:"/bratislava.sk/forms-general"},{kind:"MdxPage",name:"forms-uischema",route:"/bratislava.sk/forms-uischema"},{kind:"MdxPage",name:"forms-upload-file",route:"/bratislava.sk/forms-upload-file"},{kind:"MdxPage",name:"meilisearch-setup",route:"/bratislava.sk/meilisearch-setup"},{kind:"MdxPage",name:"react-component-structure",route:"/bratislava.sk/react-component-structure"},{kind:"Meta",data:{"add-new-component-to-sections":"Add New Component to Sections","colors-and-themes":"Colors and Themes","forms-general":"Forms General","forms-uischema":"Forms Uischema","forms-upload-file":"Forms Upload File","meilisearch-setup":"Meilisearch Setup","react-component-structure":"React Component Structure"}}]},{kind:"Folder",name:"deployment-and-infrastructure",route:"/deployment-and-infrastructure",children:[{kind:"MdxPage",name:"backups",route:"/deployment-and-infrastructure/backups"},{kind:"MdxPage",name:"database-backups",route:"/deployment-and-infrastructure/database-backups"},{kind:"MdxPage",name:"deployment",route:"/deployment-and-infrastructure/deployment"},{kind:"MdxPage",name:"grafana",route:"/deployment-and-infrastructure/grafana"},{kind:"Meta",data:{backups:"Backups","database-backups":"Database Backups",deployment:"Deployment",grafana:"Grafana"}}]},{kind:"MdxPage",name:"graphql",route:"/graphql"},{kind:"MdxPage",name:"index",route:"/",frontMatter:{sidebar_position:1}},{kind:"MdxPage",name:"meilisearch",route:"/meilisearch"},{kind:"Folder",name:"nestjs",route:"/nestjs",children:[{kind:"MdxPage",name:"Authentication",route:"/nestjs/Authentication"},{kind:"MdxPage",name:"CardWebPay",route:"/nestjs/CardWebPay"},{kind:"MdxPage",name:"Controllers",route:"/nestjs/Controllers"},{kind:"MdxPage",name:"Kubernetes",route:"/nestjs/Kubernetes"},{kind:"MdxPage",name:"Logging",route:"/nestjs/Logging"},{kind:"MdxPage",name:"Module",route:"/nestjs/Module"},{kind:"MdxPage",name:"NestJS",route:"/nestjs/NestJS",frontMatter:{sidebar_position:1}},{kind:"MdxPage",name:"OpenAPI",route:"/nestjs/OpenAPI"},{kind:"MdxPage",name:"Prisma",route:"/nestjs/Prisma"},{kind:"MdxPage",name:"ProjectStructure",route:"/nestjs/ProjectStructure"},{kind:"MdxPage",name:"RestApi",route:"/nestjs/RestApi"},{kind:"MdxPage",name:"Sentry",route:"/nestjs/Sentry"},{kind:"MdxPage",name:"Services",route:"/nestjs/Services"},{kind:"MdxPage",name:"Testing",route:"/nestjs/Testing"},{kind:"Meta",data:{Authentication:"Authentication",CardWebPay:"Cardwebpay",Controllers:"Controllers",Kubernetes:"Kubernetes",Logging:"Logging",Module:"Module",NestJS:"Nestjs",OpenAPI:"Openapi",Prisma:"Prisma",ProjectStructure:"Projectstructure",RestApi:"Restapi",Sentry:"Sentry",Services:"Services",Testing:"Testing"}}]},{kind:"Folder",name:"other",route:"/other",children:[{kind:"MdxPage",name:"developer-accesses",route:"/other/developer-accesses",frontMatter:{sidebar_position:2}},{kind:"MdxPage",name:"meetings-syncs-rituals",route:"/other/meetings-syncs-rituals",frontMatter:{sidebar_position:3}},{kind:"Meta",data:{"developer-accesses":"Developer Accesses","meetings-syncs-rituals":"Meetings Syncs Rituals"}}]},{kind:"Folder",name:"recipes",route:"/recipes",children:[{kind:"Folder",name:"alerting",route:"/recipes/alerting",children:[{kind:"MdxPage",name:"contact-point",route:"/recipes/alerting/contact-point"},{kind:"MdxPage",name:"endpoint_alert",route:"/recipes/alerting/endpoint_alert"},{kind:"MdxPage",name:"grafana_alerting",route:"/recipes/alerting/grafana_alerting",frontMatter:{sidebar_position:1}},{kind:"MdxPage",name:"log_alert",route:"/recipes/alerting/log_alert"},{kind:"MdxPage",name:"resource_alert",route:"/recipes/alerting/resource_alert"},{kind:"Meta",data:{"contact-point":"Contact Point",endpoint_alert:"Endpoint Alert",grafana_alerting:"Grafana Alerting",log_alert:"Log Alert",resource_alert:"Resource Alert"}}]},{kind:"MdxPage",name:"connecting-to-kubernetes",route:"/recipes/connecting-to-kubernetes"},{kind:"MdxPage",name:"debug-cluster-connectivity",route:"/recipes/debug-cluster-connectivity"},{kind:"MdxPage",name:"docker-setup",route:"/recipes/docker-setup"},{kind:"MdxPage",name:"editor-setup",route:"/recipes/editor-setup"},{kind:"MdxPage",name:"env-vars-and-secrets",route:"/recipes/env-vars-and-secrets"},{kind:"MdxPage",name:"git-workflow",route:"/recipes/git-workflow"},{kind:"MdxPage",name:"kubernetes-lens-setup",route:"/recipes/kubernetes-lens-setup"},{kind:"MdxPage",name:"postgres-setup",route:"/recipes/postgres-setup"},{kind:"MdxPage",name:"production-deployment-checklist",route:"/recipes/production-deployment-checklist"},{kind:"MdxPage",name:"sentry-setup",route:"/recipes/sentry-setup"},{kind:"MdxPage",name:"wsl",route:"/recipes/wsl"},{kind:"Meta",data:{alerting:"Alerting","connecting-to-kubernetes":"Connecting to Kubernetes","debug-cluster-connectivity":"Debug Cluster Connectivity","docker-setup":"Docker Setup","editor-setup":"Editor Setup","env-vars-and-secrets":"Env Vars and Secrets","git-workflow":"Git Workflow","kubernetes-lens-setup":"Kubernetes Lens Setup","postgres-setup":"Postgres Setup","production-deployment-checklist":"Production Deployment Checklist","sentry-setup":"Sentry Setup",wsl:"Wsl"}}]},{kind:"Folder",name:"strapi",route:"/strapi",children:[{kind:"MdxPage",name:"general-concepts",route:"/strapi/general-concepts",frontMatter:{sidebar_position:1}},{kind:"MdxPage",name:"load-strapi-db-in-local-dev",route:"/strapi/load-strapi-db-in-local-dev"},{kind:"MdxPage",name:"setup",route:"/strapi/setup",frontMatter:{sidebar_position:2}},{kind:"MdxPage",name:"sync-strapi-db-to-different-env",route:"/strapi/sync-strapi-db-to-different-env"},{kind:"Meta",data:{"general-concepts":"General Concepts","load-strapi-db-in-local-dev":"Load Strapi Db in Local Dev",setup:"Setup","sync-strapi-db-to-different-env":"Sync Strapi Db to Different Env"}}]}],headings:[{type:"heading",depth:1,children:[{type:"text",value:"Meilisearch setup",position:{start:{line:1,column:3,offset:2},end:{line:1,column:20,offset:19}}}],position:{start:{line:1,column:1,offset:0},end:{line:1,column:20,offset:19}},value:"Meilisearch setup"},{type:"heading",depth:3,children:[{type:"text",value:"Meilisearch ",position:{start:{line:11,column:5,offset:965},end:{line:11,column:17,offset:977}}},{type:"inlineCode",value:"MASTER_KEY",position:{start:{line:11,column:17,offset:977},end:{line:11,column:29,offset:989}}},{type:"text",value:" location",position:{start:{line:11,column:29,offset:989},end:{line:11,column:38,offset:998}}}],position:{start:{line:11,column:1,offset:961},end:{line:11,column:38,offset:998}},value:"Meilisearch MASTER_KEY location"},{type:"heading",depth:3,children:[{type:"text",value:"Index settings",position:{start:{line:17,column:5,offset:1439},end:{line:17,column:19,offset:1453}}}],position:{start:{line:17,column:1,offset:1435},end:{line:17,column:19,offset:1453}},value:"Index settings"}],flexsearch:{codeblocks:!0}};globalThis.__nextra_internal__={pageMap:h.pageMap,route:h.route};let u="Meilisearch setup";function x(e){let s=Object.assign({h1:"h1",p:"p",a:"a",code:"code",h3:"h3",div:"div",pre:"pre",span:"span"},(0,o.ah)(),e.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.h1,{children:"Meilisearch setup"}),"\n",(0,a.jsxs)(s.p,{children:["If you are looking to run a Meilisearch instance locally look to the ",(0,a.jsx)(s.a,{href:"../meilisearch",children:"Meilisearch"})," part of the docs. If you don't need to change the search configuration and need the search results only to work on the frontend code, connecting to staging meilisearch instance - ",(0,a.jsx)(s.a,{href:"https://bratislava-strapi-meilisearch.staging.bratislava.sk",children:"https://bratislava-strapi-meilisearch.staging.bratislava.sk"})," - works reasonably well (beware, though, that this will not reflect your local data if used alongside local Strapi instance)."]}),"\n",(0,a.jsxs)(s.p,{children:["On each of our instances the following manual index setup is required - this needs to be done after both the Strapi and Meilisearch instances are up and running. Read more on this topic in the ",(0,a.jsx)(s.a,{href:"../meilisearch",children:"Meilisearch"})," section of the docs."]}),"\n",(0,a.jsxs)(s.p,{children:["The following content types need to be indexed in the ",(0,a.jsx)(s.a,{href:"https://github.com/meilisearch/strapi-plugin-meilisearch",children:"meilisearch-strapi-plugin"}),": ",(0,a.jsx)(s.code,{children:"blog-post"}),", ",(0,a.jsx)(s.code,{children:"page"}),", ",(0,a.jsx)(s.code,{children:"vzn"})]}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(c(),{alt:"Meilisearch plugin screenshot",placeholder:"blur",src:d})}),"\n",(0,a.jsxs)(s.h3,{id:"meilisearch-master_key-location",children:["Meilisearch ",(0,a.jsx)(s.code,{children:"MASTER_KEY"})," location"]}),"\n",(0,a.jsxs)(s.p,{children:["Find ",(0,a.jsx)(s.code,{children:"{meilisearch-secret-name}"})," which can be found in project folder ",(0,a.jsx)(s.code,{children:'strapi -> kubernetes -> base -> secrets -> {meilisearch-file-name}.secret.{env}.yml -> metadata -> name in our case "bratislava-strapi-meilisearch-secret"'})]}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.a,{href:"https://bratislava.github.io/docs/recipes/kubernetes-lens-setup",children:"Log in"})," to k8 and open Lense and head to ",(0,a.jsx)(s.code,{children:'Config -> Secrets -> find {meili-secret-name} in our case "bratislava-strapi-meilisearch-secret"'})]}),"\n",(0,a.jsx)(s.h3,{id:"index-settings",children:"Index settings"}),"\n",(0,a.jsx)(s.p,{children:"Additionaly the following index setup is required (replace the instance and the MASTER_KEY as needed, the instance below is for production meilisearch server):"}),"\n",(0,a.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{"data-language":"bash","data-theme":"default",children:[(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"curl --request PATCH \\"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  --url https://bratislava-strapi-meilisearch.bratislava.sk/indexes/vzn/settings \\"})}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  --header "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Authorization: Bearer MASTER_KEY'"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  --header "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Content-Type: application/json'"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  --data "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'{"})]}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'	"sortableAttributes": ["title","validFrom", "publishedAt"]'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"}'"})})]})})}),"\n",(0,a.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{"data-language":"bash","data-theme":"default",children:[(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"curl --request PATCH \\"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  --url https://bratislava-strapi-meilisearch.bratislava.sk/indexes/blog-post/settings \\"})}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  --header "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Authorization: Bearer MASTER_KEY'"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  --header "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Content-Type: application/json'"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  --data "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'{"})]}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'	"sortableAttributes": ["title", "publishedAt"]'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"}'"})})]})})}),"\n",(0,a.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{"data-language":"bash","data-theme":"default",children:[(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"curl --request PATCH \\"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  --url https://bratislava-strapi-meilisearch.bratislava.sk/indexes/blog-post/settings \\"})}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  --header "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Authorization: Bearer MASTER_KEY'"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  --header "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Content-Type: application/json'"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  --data "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'{"})]}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'	"filterableAttributes": ["locale"]'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"}'"})})]})})}),"\n",(0,a.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{"data-language":"bash","data-theme":"default",children:[(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"curl --request PATCH \\"})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  --url https://bratislava-strapi-meilisearch.bratislava.sk/indexes/page/settings \\"})}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  --header "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Authorization: Bearer MASTER_KEY'"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  --header "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Content-Type: application/json'"}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,a.jsxs)(s.span,{className:"line",children:[(0,a.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  --data "}),(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'{"})]}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'	"filterableAttributes": ["locale"]'})}),"\n",(0,a.jsx)(s.span,{className:"line",children:(0,a.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"}'"})})]})})})]})}function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,o.ah)(),e.components);return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(x,{...e})}):x(e)}h.title="string"==typeof u&&u||"Meilisearch Setup";let m=e=>(0,a.jsx)(r.mK.Provider,{value:e,children:(0,a.jsx)(g,{})});(t=globalThis).__nextra_pageContext__||(t.__nextra_pageContext__=Object.create(null)),globalThis.__nextra_pageContext__["/bratislava.sk/meilisearch-setup"]={Content:m,pageOpts:h,themeConfig:i.Z}}},function(e){e.O(0,[9774,5860,2888,179],function(){return e(e.s=9707)}),_N_E=e.O()}]);