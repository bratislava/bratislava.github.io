(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2982],{9260:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/strapi/setup",function(){return s(9152)}])},9369:function(e,n,s){"use strict";var t=s(5893);s(7294);let a={logo:(0,t.jsx)("span",{children:"\uD83D\uDCDA Bratislava Documentation"}),project:{link:"https://github.com/bratislava"},docsRepositoryBase:"https://github.com/bratislava/bratislava.github.io",sidebar:{defaultMenuCollapseLevel:0},footer:{text:"Department of Innovation and Technology of the City of Bratislava"},faviconGlyph:"\uD83D\uDCDA"};n.Z=a},9152:function(e,n,s){"use strict";s.r(n);var t=s(5893),a=s(2673),i=s(4376),r=s(9369);s(9966);var o=s(1151);s(5675);let l={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,o.ah)(),e.components);return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)},pageOpts:{filePath:"pages/strapi/setup.md",route:"/strapi/setup",headings:[{depth:1,value:"Setup",id:"setup"},{depth:3,value:"One-time production setup",id:"one-time-production-setup"},{depth:3,value:"ENV_PATH setup",id:"env_path-setup"},{depth:3,value:"Production JWT Secrets",id:"production-jwt-secrets"},{depth:3,value:"Other 'production setup' files",id:"other-production-setup-files"}],pageMap:[{kind:"MdxPage",name:"GINIS",route:"/GINIS"},{kind:"Meta",data:{index:"Introduction",onboarding:"Setup & Onboarding","-- Eslint --":{type:"separator"},"eslint-and-prettier":"Eslint & Prettier","-- Web development --":{type:"separator"},frontend:"Frontend",strapi:"Strapi",graphql:"GraphQL",meilisearch:"Meilisearch",openapi:"OpenAPI client","-- Backend --":{type:"separator"},GINIS:"GINIS",nestjs:"NestJS","-- DevOps --":{type:"separator"},"deployment-and-infrastructure":"Deployment & Infrastructure","monitoring-and-observability":"Monitoring & Observability","-- Projects --":{type:"separator"},"bratislava.sk":"bratislava.sk","konto.bratislava.sk":"konto.bratislava.sk","muzeumbratislava.sk":"muzeumbratislava.sk"}},{kind:"Folder",name:"deployment-and-infrastructure",route:"/deployment-and-infrastructure",children:[{kind:"MdxPage",name:"backups",route:"/deployment-and-infrastructure/backups"},{kind:"MdxPage",name:"connecting-to-kubernetes",route:"/deployment-and-infrastructure/connecting-to-kubernetes"},{kind:"MdxPage",name:"database-backups",route:"/deployment-and-infrastructure/database-backups"},{kind:"MdxPage",name:"debug-cluster-connectivity",route:"/deployment-and-infrastructure/debug-cluster-connectivity"},{kind:"MdxPage",name:"deployment-and-releases",route:"/deployment-and-infrastructure/deployment-and-releases"},{kind:"MdxPage",name:"env-vars-and-secrets",route:"/deployment-and-infrastructure/env-vars-and-secrets"},{kind:"Meta",data:{backups:"Backups","connecting-to-kubernetes":"Connecting to Kubernetes","database-backups":"Database Backups","debug-cluster-connectivity":"Debug Cluster Connectivity","deployment-and-releases":"Deployment and Releases","env-vars-and-secrets":"Env Vars and Secrets"}}]},{kind:"MdxPage",name:"eslint-and-prettier",route:"/eslint-and-prettier"},{kind:"Folder",name:"frontend",route:"/frontend",children:[{kind:"Meta",data:{components:{title:"Components"},svg:{title:"SVG setup"},captcha:{display:"hidden",title:"Captcha"},"data-fetching-listing":{title:"Data fetching & listing",display:"hidden"},"date-and-time":{title:"Date & time",display:"hidden"},fonts:{display:"hidden",title:"Fonts"},gallery:{display:"hidden",title:"Gallery"},icons:{display:"hidden",title:"Icons"},images:{display:"hidden",title:"Images"},localization:{display:"hidden",title:"Localization"},menu:{display:"hidden",title:"Menu"},"navigation-breadcrumbs":{title:"Navigation & breadcrumbs",display:"hidden"},search:{display:"hidden",title:"Search"},seo:{display:"hidden",title:"Seo"},texts:{display:"hidden",title:"Texts"}}},{kind:"MdxPage",name:"captcha",route:"/frontend/captcha"},{kind:"Folder",name:"components",route:"/frontend/components",children:[{kind:"Meta",data:{cards:{title:"Cards"},links:{display:"hidden",title:"Links"},modals:{display:"hidden",title:"Modals"},tables:{display:"hidden",title:"Tables"}}},{kind:"MdxPage",name:"cards",route:"/frontend/components/cards"},{kind:"MdxPage",name:"links",route:"/frontend/components/links"},{kind:"MdxPage",name:"modals",route:"/frontend/components/modals"},{kind:"MdxPage",name:"tables",route:"/frontend/components/tables"}]},{kind:"MdxPage",name:"components",route:"/frontend/components"},{kind:"MdxPage",name:"data-fetching-listing",route:"/frontend/data-fetching-listing"},{kind:"MdxPage",name:"date-and-time",route:"/frontend/date-and-time"},{kind:"MdxPage",name:"fonts",route:"/frontend/fonts"},{kind:"MdxPage",name:"gallery",route:"/frontend/gallery"},{kind:"MdxPage",name:"icons",route:"/frontend/icons"},{kind:"MdxPage",name:"images",route:"/frontend/images"},{kind:"MdxPage",name:"localization",route:"/frontend/localization"},{kind:"MdxPage",name:"menu",route:"/frontend/menu"},{kind:"MdxPage",name:"navigation-breadcrumbs",route:"/frontend/navigation-breadcrumbs"},{kind:"MdxPage",name:"search",route:"/frontend/search"},{kind:"MdxPage",name:"seo",route:"/frontend/seo"},{kind:"MdxPage",name:"svg",route:"/frontend/svg"},{kind:"MdxPage",name:"texts",route:"/frontend/texts"}]},{kind:"MdxPage",name:"graphql",route:"/graphql"},{kind:"MdxPage",name:"index",route:"/"},{kind:"MdxPage",name:"meilisearch",route:"/meilisearch"},{kind:"Folder",name:"monitoring-and-observability",route:"/monitoring-and-observability",children:[{kind:"Folder",name:"alerting",route:"/monitoring-and-observability/alerting",children:[{kind:"MdxPage",name:"contact-point",route:"/monitoring-and-observability/alerting/contact-point"},{kind:"MdxPage",name:"endpoint_alert",route:"/monitoring-and-observability/alerting/endpoint_alert"},{kind:"MdxPage",name:"grafana_alerting",route:"/monitoring-and-observability/alerting/grafana_alerting"},{kind:"MdxPage",name:"log_alert",route:"/monitoring-and-observability/alerting/log_alert"},{kind:"MdxPage",name:"resource_alert",route:"/monitoring-and-observability/alerting/resource_alert"},{kind:"Meta",data:{"contact-point":"Contact Point",endpoint_alert:"Endpoint Alert",grafana_alerting:"Grafana Alerting",log_alert:"Log Alert",resource_alert:"Resource Alert"}}]},{kind:"MdxPage",name:"grafana",route:"/monitoring-and-observability/grafana"},{kind:"Meta",data:{grafana:"Grafana"}}]},{kind:"Folder",name:"onboarding",route:"/onboarding",children:[{kind:"Meta",data:{"editor-setup":"Editor Setup","docker-setup":"Docker / Podman Setup","wsl-setup":"Windows WSL Setup","kubernetes-lens-setup":"Kubernetes & Lens Setup","postgres-setup":"Postgres Setup",other:"Other Setups","--- Workflow ---":{type:"separator"},"developer-accesses":"Developer Accesses","git-workflow":"Git Workflow"}},{kind:"MdxPage",name:"developer-accesses",route:"/onboarding/developer-accesses"},{kind:"MdxPage",name:"docker-setup",route:"/onboarding/docker-setup"},{kind:"MdxPage",name:"editor-setup",route:"/onboarding/editor-setup"},{kind:"MdxPage",name:"git-workflow",route:"/onboarding/git-workflow"},{kind:"MdxPage",name:"kubernetes-lens-setup",route:"/onboarding/kubernetes-lens-setup"},{kind:"MdxPage",name:"other",route:"/onboarding/other"},{kind:"MdxPage",name:"postgres-setup",route:"/onboarding/postgres-setup"},{kind:"MdxPage",name:"wsl-setup",route:"/onboarding/wsl-setup"}]},{kind:"MdxPage",name:"openapi",route:"/openapi"},{kind:"Folder",name:"strapi",route:"/strapi",children:[{kind:"Meta",data:{"general-concepts":"General concepts","best-practices":"Best practices","make-content-public":"Make the content public",setup:"Setup","load-strapi-db-in-local-dev":"Load DB for local development","sync-strapi-db-to-different-env":"Sync DB between deployments"}},{kind:"MdxPage",name:"best-practices",route:"/strapi/best-practices"},{kind:"MdxPage",name:"load-strapi-db-in-local-dev",route:"/strapi/load-strapi-db-in-local-dev"},{kind:"MdxPage",name:"make-content-public",route:"/strapi/make-content-public"},{kind:"MdxPage",name:"setup",route:"/strapi/setup"},{kind:"MdxPage",name:"sync-strapi-db-to-different-env",route:"/strapi/sync-strapi-db-to-different-env"}]}],flexsearch:{codeblocks:!0},title:"Setup"},pageNextRoute:"/strapi/setup",nextraLayout:i.ZP,themeConfig:r.Z};function d(e){let n=Object.assign({h1:"h1",p:"p",a:"a",h3:"h3",code:"code",pre:"pre",span:"span",em:"em",ul:"ul",li:"li"},(0,o.ah)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"setup",children:"Setup"}),"\n",(0,t.jsxs)(n.p,{children:["This guide focuses on specific updates to the Strapi setup related to our own needs and requirements. For more general information about Strapi, please refer to the ",(0,t.jsx)(n.a,{href:"https://strapi.io/documentation/developer-docs/latest/getting-started/introduction.html",children:"official documentation"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"one-time-production-setup",children:"One-time production setup"}),"\n",(0,t.jsx)(n.p,{children:"The steps below are needed to make our strapi instance deployment (and production) ready."}),"\n",(0,t.jsx)(n.h3,{id:"env_path-setup",children:"ENV_PATH setup"}),"\n",(0,t.jsxs)(n.p,{children:["Strapi takes ",(0,t.jsx)(n.a,{href:"https://docs.strapi.io/developer-docs/latest/setup-deployment-guides/configurations/optional/environment.html#strapi-s-environment-variables",children:"ENV_PATH"})," environment variable to decide which .env file it should use - it's best to override the ",(0,t.jsx)(n.code,{children:'"scripts"'})," section of ",(0,t.jsx)(n.code,{children:"package.json"}),". To make it work under both Windows and Unix-like systems, install ",(0,t.jsx)(n.code,{children:"cross-env"})," beforehand:"]}),"\n",(0,t.jsx)(n.pre,{"data-language":"bash","data-theme":"default",children:(0,t.jsx)(n.code,{"data-language":"bash","data-theme":"default",children:(0,t.jsxs)(n.span,{className:"line",children:[(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"yarn"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"add"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"-D"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"cross-env"})]})})}),"\n",(0,t.jsx)(n.p,{children:"Then edit package.json as follows:"}),"\n",(0,t.jsx)(n.pre,{"data-language":"text","data-theme":"default",children:(0,t.jsxs)(n.code,{"data-language":"text","data-theme":"default",children:[(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"..."})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:'"scripts": {'})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:'"develop": "cross-env ENV_PATH=\'./.env.local\' strapi develop",'})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:'"start": "strapi start",'})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:'"build": "strapi build",'})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:'"strapi": "strapi",'})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"..."})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"},"})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"..."})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"}})})]})}),"\n",(0,t.jsxs)(n.p,{children:["This will allow you to easily maintain different dev and prod env vars inside the git repo - we usually keep .env.local outside of git and commit ",(0,t.jsx)(n.code,{children:"env.development"})," file, which the devs are encouraged to copy into their own ",(0,t.jsx)(n.code,{children:".env.local"})," which they can override. This system is not perfect, but seems reasonable enough in a system like Strapi which, by default, accepts only a single ",(0,t.jsx)(n.code,{children:".env"})," config file at once."]}),"\n",(0,t.jsxs)(n.p,{children:["An example of ",(0,t.jsx)(n.code,{children:".env.local"})," file from ",(0,t.jsx)(n.code,{children:"bratislava.sk"})," project:"]}),"\n",(0,t.jsx)(n.pre,{"data-language":"text","data-theme":"default",children:(0,t.jsxs)(n.code,{"data-language":"text","data-theme":"default",children:[(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"HOST=0.0.0.0"})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"PORT=1337"})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"APP_KEYS=VivFhCHdok6Ui4H1yhF8DA==,fkXjik+gn+fRLqatGAE8QQ==,M8eRp3VNi4dzdfHOTBlT7w==,PODWh8urxrSZKWXWxiEV3w=="})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"API_TOKEN_SALT=ilrHJDUcrKxGMpxyBh32VA=="})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"ADMIN_JWT_SECRET=odOY9wudFDnl//bE+nVWAQ=="})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"JWT_SECRET=U4RUqp1ohkwtt6gRopMtdg=="})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"DATABASE_HOST=localhost"})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"DATABASE_PORT=5432"})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"DATABASE_NAME=strapi"})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"DATABASE_USERNAME=strapi"})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"DATABASE_PASSWORD=password"})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"DATABASE_SCHEMA=public"})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"}})})]})}),"\n",(0,t.jsx)(n.h3,{id:"production-jwt-secrets",children:"Production JWT Secrets"}),"\n",(0,t.jsxs)(n.p,{children:["As of Strapi v4.3 (and unlikely to change in near future), the 'clean' Strapi init generates a few secrets for you into ",(0,t.jsx)(n.code,{children:".env"})," file - these are used as seeds to generate one-time tokens and thus the ones used in production shouldn't be stored in github."]}),"\n",(0,t.jsx)(n.p,{children:"This means you need to insert the following env vars as secrets:"}),"\n",(0,t.jsx)(n.pre,{"data-language":"text","data-theme":"default",children:(0,t.jsxs)(n.code,{"data-language":"text","data-theme":"default",children:[(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"ADMIN_JWT_SECRET"})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"API_TOKEN_SALT"})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"APP_KEYS"})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"JWT_SECRET"})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"}})})]})}),"\n",(0,t.jsxs)(n.p,{children:["where ",(0,t.jsx)(n.code,{children:"ADMIN_JWT_SECRET"})," are 4 base64 encoded strings separated by comma ",(0,t.jsx)(n.code,{children:","})," character, and the rest are base64 encoded strings. Strapi docs ",(0,t.jsx)(n.a,{href:"https://docs.strapi.io/developer-docs/latest/setup-deployment-guides/deployment/hosting-guides/heroku.html",children:"recommend"})," generating the secrets with ",(0,t.jsx)(n.code,{children:"openssl"})," command:"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"openssl rand -base64 32"})}),"\n",(0,t.jsx)(n.p,{children:"Specifically, for APP_KEYS:"}),"\n",(0,t.jsx)(n.pre,{"data-language":"bash","data-theme":"default",children:(0,t.jsx)(n.code,{"data-language":"bash","data-theme":"default",children:(0,t.jsxs)(n.span,{className:"line",children:[(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"APP_KEYS"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"$("}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"openssl"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"rand"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"-base64"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"32"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:")"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:","}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"$("}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"openssl"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"rand"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"-base64"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"32"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:")"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:","}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"$("}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"openssl"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"rand"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"-base64"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"32"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:")"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:","}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"$("}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"openssl"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"rand"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"-base64"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"32"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:")"})]})})}),"\n",(0,t.jsxs)(n.p,{children:["This means the secret file will look something like this (replace the placeholder values with the openssl result ",(0,t.jsx)(n.em,{children:"encoded once more into base64"})," - more details in ",(0,t.jsx)(n.a,{href:"../deployment-and-infrastructure/env-vars-and-secrets",children:"secrets docs"}),")):"]}),"\n",(0,t.jsx)(n.pre,{"data-language":"text","data-theme":"default",children:(0,t.jsxs)(n.code,{"data-language":"text","data-theme":"default",children:[(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"apiVersion: v1"})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"kind: Secret"})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"metadata:"})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  name: bratislava-strapi-internals-secret"})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"annotation:"})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:'  sealedsecrets.bitnami.com/managed: "true"'})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"data:"})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  ADMIN_JWT_SECRET: YmFuYW5h"})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  API_TOKEN_SALT: YmFuYW5h"})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  APP_KEYS: YmFuYW5h"})}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  JWT_SECRET: YmFuYW5h"})})]})}),"\n",(0,t.jsx)(n.h3,{id:"other-production-setup-files",children:"Other 'production setup' files"}),"\n",(0,t.jsx)(n.p,{children:"Other than that, your setup should include:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Dockerfile"}),"\n",(0,t.jsx)(n.li,{children:"dockerignore"}),"\n",(0,t.jsx)(n.li,{children:"kubernetes directory"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["best copied over from one of the maintained project (i.e. ",(0,t.jsx)(n.code,{children:"bratislava.sk"}),")"]})]})}n.default=(0,a.j)(l)}},function(e){e.O(0,[9774,5840,2888,179],function(){return e(e.s=9260)}),_N_E=e.O()}]);