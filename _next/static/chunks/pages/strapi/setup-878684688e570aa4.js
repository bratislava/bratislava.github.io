(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2982],{9260:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/strapi/setup",function(){return s(3572)}])},3957:function(e,n,s){"use strict";var t=s(5893);s(7294);let a={logo:(0,t.jsx)("span",{children:"\uD83D\uDCDA Bratislava Documentation"}),project:{link:"https://github.com/bratislava"},docsRepositoryBase:"https://github.com/bratislava/bratislava.github.io",footer:{text:"Department of Innovation and Technology of the City of Bratislava"},faviconGlyph:"\uD83D\uDCDA"};n.Z=a},3572:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return p.ZP}});var t,a=s(5893),r=s(2720),i=s(3957);s(5513);var o=s(1151),l=s(5675),c=s.n(l),d={src:"/_next/static/media/strapi-public-permissions.7d19ec29.png",height:924,width:1909,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r+mnAAAAS0lEQVR42g2IwQ0AIQzD2qaI/ZeFg0JyWJYf9jG+ewk4EJk559q7yEj3MCOZpElexbVOa0gAVbf3iPDH3i9m5gFYZpxTT4mS3pb0AzYFLrsOwmMkAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:4},p=s(1235);let h={filePath:"pages/strapi/setup.md",route:"/strapi/setup",frontMatter:{sidebar_position:2},pageMap:[{kind:"Meta",data:{index:"Introduction","bratislava.sk":"Bratislava.sk","deployment-and-infrastructure":"Deployment and Infrastructure",graphql:"GraphQL",meilisearch:"Meilisearch",nestjs:"Nestjs",other:"Other",recipes:"Recipes",strapi:"Strapi"}},{kind:"Folder",name:"bratislava.sk",route:"/bratislava.sk",children:[{kind:"MdxPage",name:"add-new-component-to-sections",route:"/bratislava.sk/add-new-component-to-sections"},{kind:"MdxPage",name:"colors-and-themes",route:"/bratislava.sk/colors-and-themes"},{kind:"MdxPage",name:"forms-general",route:"/bratislava.sk/forms-general"},{kind:"MdxPage",name:"forms-uischema",route:"/bratislava.sk/forms-uischema"},{kind:"MdxPage",name:"forms-upload-file",route:"/bratislava.sk/forms-upload-file"},{kind:"MdxPage",name:"meilisearch-setup",route:"/bratislava.sk/meilisearch-setup"},{kind:"MdxPage",name:"react-component-structure",route:"/bratislava.sk/react-component-structure"},{kind:"Meta",data:{"add-new-component-to-sections":"Add New Component to Sections","colors-and-themes":"Colors and Themes","forms-general":"Forms General","forms-uischema":"Forms Uischema","forms-upload-file":"Forms Upload File","meilisearch-setup":"Meilisearch Setup","react-component-structure":"React Component Structure"}}]},{kind:"Folder",name:"deployment-and-infrastructure",route:"/deployment-and-infrastructure",children:[{kind:"MdxPage",name:"backups",route:"/deployment-and-infrastructure/backups"},{kind:"MdxPage",name:"database-backups",route:"/deployment-and-infrastructure/database-backups"},{kind:"MdxPage",name:"deployment",route:"/deployment-and-infrastructure/deployment"},{kind:"MdxPage",name:"grafana",route:"/deployment-and-infrastructure/grafana"},{kind:"Meta",data:{backups:"Backups","database-backups":"Database Backups",deployment:"Deployment",grafana:"Grafana"}}]},{kind:"MdxPage",name:"graphql",route:"/graphql"},{kind:"MdxPage",name:"index",route:"/",frontMatter:{sidebar_position:1}},{kind:"MdxPage",name:"meilisearch",route:"/meilisearch"},{kind:"Folder",name:"nestjs",route:"/nestjs",children:[{kind:"MdxPage",name:"Authentication",route:"/nestjs/Authentication"},{kind:"MdxPage",name:"CardWebPay",route:"/nestjs/CardWebPay"},{kind:"MdxPage",name:"Controllers",route:"/nestjs/Controllers"},{kind:"MdxPage",name:"Kubernetes",route:"/nestjs/Kubernetes"},{kind:"MdxPage",name:"Logging",route:"/nestjs/Logging"},{kind:"MdxPage",name:"Module",route:"/nestjs/Module"},{kind:"MdxPage",name:"NestJS",route:"/nestjs/NestJS",frontMatter:{sidebar_position:1}},{kind:"MdxPage",name:"OpenAPI",route:"/nestjs/OpenAPI"},{kind:"MdxPage",name:"Prisma",route:"/nestjs/Prisma"},{kind:"MdxPage",name:"ProjectStructure",route:"/nestjs/ProjectStructure"},{kind:"MdxPage",name:"RestApi",route:"/nestjs/RestApi"},{kind:"MdxPage",name:"Sentry",route:"/nestjs/Sentry"},{kind:"MdxPage",name:"Services",route:"/nestjs/Services"},{kind:"MdxPage",name:"Testing",route:"/nestjs/Testing"},{kind:"Meta",data:{Authentication:"Authentication",CardWebPay:"Cardwebpay",Controllers:"Controllers",Kubernetes:"Kubernetes",Logging:"Logging",Module:"Module",NestJS:"Nestjs",OpenAPI:"Openapi",Prisma:"Prisma",ProjectStructure:"Projectstructure",RestApi:"Restapi",Sentry:"Sentry",Services:"Services",Testing:"Testing"}}]},{kind:"Folder",name:"other",route:"/other",children:[{kind:"MdxPage",name:"developer-accesses",route:"/other/developer-accesses",frontMatter:{sidebar_position:2}},{kind:"MdxPage",name:"meetings-syncs-rituals",route:"/other/meetings-syncs-rituals",frontMatter:{sidebar_position:3}},{kind:"Meta",data:{"developer-accesses":"Developer Accesses","meetings-syncs-rituals":"Meetings Syncs Rituals"}}]},{kind:"Folder",name:"recipes",route:"/recipes",children:[{kind:"Folder",name:"alerting",route:"/recipes/alerting",children:[{kind:"MdxPage",name:"contact-point",route:"/recipes/alerting/contact-point"},{kind:"MdxPage",name:"endpoint_alert",route:"/recipes/alerting/endpoint_alert"},{kind:"MdxPage",name:"grafana_alerting",route:"/recipes/alerting/grafana_alerting",frontMatter:{sidebar_position:1}},{kind:"MdxPage",name:"log_alert",route:"/recipes/alerting/log_alert"},{kind:"MdxPage",name:"resource_alert",route:"/recipes/alerting/resource_alert"},{kind:"Meta",data:{"contact-point":"Contact Point",endpoint_alert:"Endpoint Alert",grafana_alerting:"Grafana Alerting",log_alert:"Log Alert",resource_alert:"Resource Alert"}}]},{kind:"MdxPage",name:"connecting-to-kubernetes",route:"/recipes/connecting-to-kubernetes"},{kind:"MdxPage",name:"debug-cluster-connectivity",route:"/recipes/debug-cluster-connectivity"},{kind:"MdxPage",name:"docker-setup",route:"/recipes/docker-setup"},{kind:"MdxPage",name:"editor-setup",route:"/recipes/editor-setup"},{kind:"MdxPage",name:"env-vars-and-secrets",route:"/recipes/env-vars-and-secrets"},{kind:"MdxPage",name:"git-workflow",route:"/recipes/git-workflow"},{kind:"MdxPage",name:"kubernetes-lens-setup",route:"/recipes/kubernetes-lens-setup"},{kind:"MdxPage",name:"postgres-setup",route:"/recipes/postgres-setup"},{kind:"MdxPage",name:"production-deployment-checklist",route:"/recipes/production-deployment-checklist"},{kind:"MdxPage",name:"sentry-setup",route:"/recipes/sentry-setup"},{kind:"MdxPage",name:"wsl",route:"/recipes/wsl"},{kind:"Meta",data:{alerting:"Alerting","connecting-to-kubernetes":"Connecting to Kubernetes","debug-cluster-connectivity":"Debug Cluster Connectivity","docker-setup":"Docker Setup","editor-setup":"Editor Setup","env-vars-and-secrets":"Env Vars and Secrets","git-workflow":"Git Workflow","kubernetes-lens-setup":"Kubernetes Lens Setup","postgres-setup":"Postgres Setup","production-deployment-checklist":"Production Deployment Checklist","sentry-setup":"Sentry Setup",wsl:"Wsl"}}]},{kind:"Folder",name:"strapi",route:"/strapi",children:[{kind:"MdxPage",name:"general-concepts",route:"/strapi/general-concepts",frontMatter:{sidebar_position:1}},{kind:"MdxPage",name:"load-strapi-db-in-local-dev",route:"/strapi/load-strapi-db-in-local-dev"},{kind:"MdxPage",name:"setup",route:"/strapi/setup",frontMatter:{sidebar_position:2}},{kind:"MdxPage",name:"sync-strapi-db-to-different-env",route:"/strapi/sync-strapi-db-to-different-env"},{kind:"Meta",data:{"general-concepts":"General Concepts","load-strapi-db-in-local-dev":"Load Strapi Db in Local Dev",setup:"Setup","sync-strapi-db-to-different-env":"Sync Strapi Db to Different Env"}}]}],headings:[{type:"heading",depth:1,children:[{type:"text",value:"Setup",position:{start:{line:2,column:3,offset:3},end:{line:2,column:8,offset:8}}}],position:{start:{line:2,column:1,offset:1},end:{line:2,column:8,offset:8}},value:"Setup"},{type:"heading",depth:2,children:[{type:"text",value:"Making content accessible without authentication",position:{start:{line:6,column:4,offset:294},end:{line:6,column:52,offset:342}}}],position:{start:{line:6,column:1,offset:291},end:{line:6,column:52,offset:342}},value:"Making content accessible without authentication"},{type:"heading",depth:3,children:[{type:"text",value:"One-time production setup",position:{start:{line:20,column:5,offset:848},end:{line:20,column:30,offset:873}}}],position:{start:{line:20,column:1,offset:844},end:{line:20,column:30,offset:873}},value:"One-time production setup"},{type:"heading",depth:3,children:[{type:"text",value:"ENV_PATH setup",position:{start:{line:24,column:5,offset:970},end:{line:24,column:19,offset:984}}}],position:{start:{line:24,column:1,offset:966},end:{line:24,column:19,offset:984}},value:"ENV_PATH setup"},{type:"heading",depth:3,children:[{type:"text",value:"Production JWT Secrets",position:{start:{line:69,column:5,offset:2492},end:{line:69,column:27,offset:2514}}}],position:{start:{line:69,column:1,offset:2488},end:{line:69,column:27,offset:2514}},value:"Production JWT Secrets"},{type:"heading",depth:3,children:[{type:"text",value:"Other 'production setup' files",position:{start:{line:110,column:5,offset:3866},end:{line:110,column:35,offset:3896}}}],position:{start:{line:110,column:1,offset:3862},end:{line:110,column:35,offset:3896}},value:"Other 'production setup' files"}],flexsearch:{codeblocks:!0}};globalThis.__nextra_internal__={pageMap:h.pageMap,route:h.route};let u="Setup";function x(e){let n=Object.assign({h1:"h1",p:"p",a:"a",h2:"h2",ul:"ul",li:"li",code:"code",h3:"h3",div:"div",pre:"pre",span:"span",em:"em"},(0,o.ah)(),e.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{children:"Setup"}),"\n",(0,a.jsxs)(n.p,{children:["This guide focuses on specific updates to the Strapi setup related to our own needs and requirements. For more general information about Strapi, please refer to the ",(0,a.jsx)(n.a,{href:"https://strapi.io/documentation/developer-docs/latest/getting-started/introduction.html",children:"official documentation"}),"."]}),"\n",(0,a.jsx)(n.h2,{id:"making-content-accessible-without-authentication",children:"Making content accessible without authentication"}),"\n",(0,a.jsx)(n.p,{children:"This needs to be done:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"when you setup a new instance or database, either locally or on a new deployment"}),"\n",(0,a.jsx)(n.li,{children:"every time you add a new content type, on every deployment"}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["Go to ",(0,a.jsx)(n.code,{children:"Settings"})," -> in the sidebar ",(0,a.jsx)(n.code,{children:"USERS & PERMISSIONS PLUGIN: Roles"})," -> edit icon ✏️ next to the ",(0,a.jsx)(n.code,{children:"Public"})," role -> ",(0,a.jsx)(n.code,{children:"Permissions"}),". In all of your custom content types, particularly the newly added ones, make sure the following permissions are checked:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"find"}),"\n",(0,a.jsx)(n.li,{children:"findOne (if available)"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(c(),{placeholder:"blur",src:d})}),"\n",(0,a.jsx)(n.h3,{id:"one-time-production-setup",children:"One-time production setup"}),"\n",(0,a.jsx)(n.p,{children:"The steps below are needed to make our strapi instance deployment (and production) ready."}),"\n",(0,a.jsx)(n.h3,{id:"env_path-setup",children:"ENV_PATH setup"}),"\n",(0,a.jsxs)(n.p,{children:["Strapi takes ",(0,a.jsx)(n.a,{href:"https://docs.strapi.io/developer-docs/latest/setup-deployment-guides/configurations/optional/environment.html#strapi-s-environment-variables",children:"ENV_PATH"})," environment variable to decide which .env file it should use - it's best to override the ",(0,a.jsx)(n.code,{children:'"scripts"'})," section of ",(0,a.jsx)(n.code,{children:"package.json"}),". To make it work under both Windows and Unix-like systems, install ",(0,a.jsx)(n.code,{children:"cross-env"})," beforehand:"]}),"\n",(0,a.jsx)(n.div,{"data-rehype-pretty-code-fragment":"",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{"data-language":"bash","data-theme":"default",children:(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"yarn add -D cross-env"})})})})}),"\n",(0,a.jsx)(n.p,{children:"Then edit package.json as follows:"}),"\n",(0,a.jsx)(n.div,{"data-rehype-pretty-code-fragment":"",children:(0,a.jsx)(n.pre,{children:(0,a.jsxs)(n.code,{"data-language":"text","data-theme":"default",children:[(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"..."})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:'"scripts": {'})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:'"develop": "cross-env ENV_PATH=\'./.env.local\' strapi develop",'})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:'"start": "strapi start",'})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:'"build": "strapi build",'})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:'"strapi": "strapi",'})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"..."})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"},"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"..."})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"}})})]})})}),"\n",(0,a.jsxs)(n.p,{children:["This will allow you to easily maintain different dev and prod env vars inside the git repo - we usually keep .env.local outside of git and commit ",(0,a.jsx)(n.code,{children:"env.development"})," file, which the devs are encouraged to copy into their own ",(0,a.jsx)(n.code,{children:".env.local"})," which they can override. This system is not perfect, but seems reasonable enough in a system like Strapi which, by default, accepts only a single ",(0,a.jsx)(n.code,{children:".env"})," config file at once."]}),"\n",(0,a.jsxs)(n.p,{children:["An example of ",(0,a.jsx)(n.code,{children:".env.local"})," file from ",(0,a.jsx)(n.code,{children:"bratislava.sk"})," project:"]}),"\n",(0,a.jsx)(n.div,{"data-rehype-pretty-code-fragment":"",children:(0,a.jsx)(n.pre,{children:(0,a.jsxs)(n.code,{"data-language":"text","data-theme":"default",children:[(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"HOST=0.0.0.0"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"PORT=1337"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"APP_KEYS=VivFhCHdok6Ui4H1yhF8DA==,fkXjik+gn+fRLqatGAE8QQ==,M8eRp3VNi4dzdfHOTBlT7w==,PODWh8urxrSZKWXWxiEV3w=="})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"API_TOKEN_SALT=ilrHJDUcrKxGMpxyBh32VA=="})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"ADMIN_JWT_SECRET=odOY9wudFDnl//bE+nVWAQ=="})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"JWT_SECRET=U4RUqp1ohkwtt6gRopMtdg=="})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"DATABASE_HOST=localhost"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"DATABASE_PORT=5432"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"DATABASE_NAME=strapi"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"DATABASE_USERNAME=strapi"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"DATABASE_PASSWORD=password"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"DATABASE_SCHEMA=public"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"}})})]})})}),"\n",(0,a.jsx)(n.h3,{id:"production-jwt-secrets",children:"Production JWT Secrets"}),"\n",(0,a.jsxs)(n.p,{children:["As of Strapi v4.3 (and unlikely to change in near future), the 'clean' Strapi init generates a few secrets for you into ",(0,a.jsx)(n.code,{children:".env"})," file - these are used as seeds to generate one-time tokens and thus the ones used in production shouldn't be stored in github."]}),"\n",(0,a.jsx)(n.p,{children:"This means you need to insert the following env vars as secrets:"}),"\n",(0,a.jsx)(n.div,{"data-rehype-pretty-code-fragment":"",children:(0,a.jsx)(n.pre,{children:(0,a.jsxs)(n.code,{"data-language":"text","data-theme":"default",children:[(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"ADMIN_JWT_SECRET"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"API_TOKEN_SALT"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"APP_KEYS"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"JWT_SECRET"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"}})})]})})}),"\n",(0,a.jsxs)(n.p,{children:["where ",(0,a.jsx)(n.code,{children:"ADMIN_JWT_SECRET"})," are 4 base64 encoded strings separated by comma ",(0,a.jsx)(n.code,{children:","})," character, and the rest are base64 encoded strings. Strapi docs ",(0,a.jsx)(n.a,{href:"https://docs.strapi.io/developer-docs/latest/setup-deployment-guides/deployment/hosting-guides/heroku.html",children:"recommend"})," generating the secrets with ",(0,a.jsx)(n.code,{children:"openssl"})," command:"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"openssl rand -base64 32"})}),"\n",(0,a.jsx)(n.p,{children:"Specifically, for APP_KEYS:"}),"\n",(0,a.jsx)(n.div,{"data-rehype-pretty-code-fragment":"",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{"data-language":"bash","data-theme":"default",children:(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"APP_KEYS="}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"$(openssl rand -base64 32)"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:","}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"$(openssl rand -base64 32)"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:","}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"$(openssl rand -base64 32)"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:","}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"$(openssl rand -base64 32)"})]})})})}),"\n",(0,a.jsxs)(n.p,{children:["This means the secret file will look something like this (replace the placeholder values with the openssl result ",(0,a.jsx)(n.em,{children:"encoded once more into base64"})," - more details in ",(0,a.jsx)(n.a,{href:"../recipes/env-vars-and-secrets",children:"secrets docs"}),")):"]}),"\n",(0,a.jsx)(n.div,{"data-rehype-pretty-code-fragment":"",children:(0,a.jsx)(n.pre,{children:(0,a.jsxs)(n.code,{"data-language":"text","data-theme":"default",children:[(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"apiVersion: v1"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"kind: Secret"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"metadata:"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  name: bratislava-strapi-internals-secret"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"annotation:"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:'  sealedsecrets.bitnami.com/managed: "true"'})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"data:"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  ADMIN_JWT_SECRET: YmFuYW5h"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  API_TOKEN_SALT: YmFuYW5h"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  APP_KEYS: YmFuYW5h"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  JWT_SECRET: YmFuYW5h"})})]})})}),"\n",(0,a.jsx)(n.h3,{id:"other-production-setup-files",children:"Other 'production setup' files"}),"\n",(0,a.jsx)(n.p,{children:"Other than that, your setup should include:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Dockerfile"}),"\n",(0,a.jsx)(n.li,{children:"dockerignore"}),"\n",(0,a.jsx)(n.li,{children:"kubernetes directory"}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["best copied over from one of the maintained project (i.e. ",(0,a.jsx)(n.code,{children:"bratislava.sk"}),")"]})]})}function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,o.ah)(),e.components);return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(x,{...e})}):x(e)}h.title="string"==typeof u&&u||"Setup";let g=e=>(0,a.jsx)(r.mK.Provider,{value:e,children:(0,a.jsx)(m,{})});(t=globalThis).__nextra_pageContext__||(t.__nextra_pageContext__=Object.create(null)),globalThis.__nextra_pageContext__["/strapi/setup"]={Content:g,pageOpts:h,themeConfig:i.Z}}},function(e){e.O(0,[9774,5860,2888,179],function(){return e(e.s=9260)}),_N_E=e.O()}]);