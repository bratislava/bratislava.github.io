(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5425],{6915:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/monitoring-and-observability/alerting/endpoint_alert",function(){return t(9973)}])},424:function(e,n){"use strict";n.Z={src:"/_next/static/media/create_new_alert.ec738f93.png",height:545,width:1583,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAYAAACuyE5IAAAATUlEQVR4nB2KSQ6AMAwD3QUqhOD/b4QLJRzCpW6SkWxZI6evv/xVsewbQAQ5Z+uAqV83i4l6HsAYIBkHj00mEeHaGmopJsxYHD/0RzkBZXQimyJVdo0AAAAASUVORK5CYII=",blurWidth:8,blurHeight:3}},9369:function(e,n,t){"use strict";var a=t(5893);t(7294);let i={logo:(0,a.jsx)("span",{children:"\uD83D\uDCDA Bratislava Documentation"}),project:{link:"https://github.com/bratislava"},docsRepositoryBase:"https://github.com/bratislava/bratislava.github.io",sidebar:{defaultMenuCollapseLevel:0},footer:{text:"Department of Innovation and Technology of the City of Bratislava"},faviconGlyph:"\uD83D\uDCDA"};n.Z=i},9973:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return b}});var a=t(5893),i=t(2673),r=t(4376),o=t(9369);t(9966);var s=t(1151),d=t(5675),l=t.n(d),c=t(424),u={src:"/_next/static/media/infinity_alert_example.f01a1c87.png",height:405,width:1428,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAIAAADq9gq6AAAAKUlEQVR42hWGwQ0AIAyE3H9ZG472bSWEcIiAGr1VJHavJ4tuZuYPSOx+dAUtogHrh3wAAAAASUVORK5CYII=",blurWidth:8,blurHeight:2},p={src:"/_next/static/media/infinity_math_example.5de86c61.png",height:190,width:347,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r+mnAAAASElEQVR42jXKUQ6AMAgDUO5/ThMTIz9ssgo4xSW89KdpSVrfdj64ScsIgAHoGOTuqldEyD91VQXurPSWp8yFAJzMeczXLGb2AQ54XSQvO5buAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:4},g={src:"/_next/static/media/infinity_summary_description_info.92a26672.png",height:424,width:618,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAAPFBMVEX////+/v79/f38/Pz7+/v6+/v6+vr5+vr5+fn4+Pj39/f29/f29vb19vb19fXy8/Pw8PDv8PDv7+/u7u/W4kQPAAAAMElEQVR42g3JSwIAEAgFwKeISPnc/67MdnC3qzUwehZtnBxEoUASTInClX6y0Vh6Hhu6ATKxDV+BAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:5};let h={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,s.ah)(),e.components);return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(m,{...e})}):m(e)},pageOpts:{filePath:"pages/monitoring-and-observability/alerting/endpoint_alert.md",route:"/monitoring-and-observability/alerting/endpoint_alert",headings:[{depth:1,value:"Alerting on Endpoint Availability or Request Data (HTTP Request)",id:"alerting-on-endpoint-availability-or-request-data-http-request"},{depth:2,value:"Examples",id:"examples"}],pageMap:[{kind:"MdxPage",name:"GINIS",route:"/GINIS"},{kind:"Meta",data:{index:"Introduction",onboarding:"Setup & Onboarding","-- Eslint --":{type:"separator"},"eslint-and-prettier":"Eslint & Prettier","-- Web development --":{type:"separator"},frontend:"Frontend",strapi:"Strapi",graphql:"GraphQL",meilisearch:"Meilisearch",openapi:"OpenAPI client","-- Backend --":{type:"separator"},GINIS:"GINIS",nestjs:"NestJS","-- DevOps --":{type:"separator"},"deployment-and-infrastructure":"Deployment & Infrastructure","monitoring-and-observability":"Monitoring & Observability","-- Projects --":{type:"separator"},"bratislava.sk":"bratislava.sk","konto.bratislava.sk":"konto.bratislava.sk","muzeumbratislava.sk":"muzeumbratislava.sk"}},{kind:"Folder",name:"deployment-and-infrastructure",route:"/deployment-and-infrastructure",children:[{kind:"MdxPage",name:"backups",route:"/deployment-and-infrastructure/backups"},{kind:"MdxPage",name:"connecting-to-kubernetes",route:"/deployment-and-infrastructure/connecting-to-kubernetes"},{kind:"MdxPage",name:"database-backups",route:"/deployment-and-infrastructure/database-backups"},{kind:"MdxPage",name:"debug-cluster-connectivity",route:"/deployment-and-infrastructure/debug-cluster-connectivity"},{kind:"MdxPage",name:"deployment-and-releases",route:"/deployment-and-infrastructure/deployment-and-releases"},{kind:"MdxPage",name:"env-vars-and-secrets",route:"/deployment-and-infrastructure/env-vars-and-secrets"},{kind:"Meta",data:{backups:"Backups","connecting-to-kubernetes":"Connecting to Kubernetes","database-backups":"Database Backups","debug-cluster-connectivity":"Debug Cluster Connectivity","deployment-and-releases":"Deployment and Releases","env-vars-and-secrets":"Env Vars and Secrets"}}]},{kind:"MdxPage",name:"eslint-and-prettier",route:"/eslint-and-prettier"},{kind:"Folder",name:"frontend",route:"/frontend",children:[{kind:"Meta",data:{components:{title:"Components"},svg:{title:"SVG setup"},captcha:{display:"hidden",title:"Captcha"},"data-fetching-listing":{title:"Data fetching & listing",display:"hidden"},"date-and-time":{title:"Date & time",display:"hidden"},fonts:{display:"hidden",title:"Fonts"},gallery:{display:"hidden",title:"Gallery"},icons:{display:"hidden",title:"Icons"},images:{display:"hidden",title:"Images"},localization:{display:"hidden",title:"Localization"},menu:{display:"hidden",title:"Menu"},"navigation-breadcrumbs":{title:"Navigation & breadcrumbs",display:"hidden"},search:{display:"hidden",title:"Search"},seo:{display:"hidden",title:"Seo"},texts:{display:"hidden",title:"Texts"}}},{kind:"MdxPage",name:"captcha",route:"/frontend/captcha"},{kind:"Folder",name:"components",route:"/frontend/components",children:[{kind:"Meta",data:{cards:{title:"Cards"},links:{display:"hidden",title:"Links"},modals:{display:"hidden",title:"Modals"},tables:{display:"hidden",title:"Tables"}}},{kind:"MdxPage",name:"cards",route:"/frontend/components/cards"},{kind:"MdxPage",name:"links",route:"/frontend/components/links"},{kind:"MdxPage",name:"modals",route:"/frontend/components/modals"},{kind:"MdxPage",name:"tables",route:"/frontend/components/tables"}]},{kind:"MdxPage",name:"components",route:"/frontend/components"},{kind:"MdxPage",name:"data-fetching-listing",route:"/frontend/data-fetching-listing"},{kind:"MdxPage",name:"date-and-time",route:"/frontend/date-and-time"},{kind:"MdxPage",name:"fonts",route:"/frontend/fonts"},{kind:"MdxPage",name:"gallery",route:"/frontend/gallery"},{kind:"MdxPage",name:"icons",route:"/frontend/icons"},{kind:"MdxPage",name:"images",route:"/frontend/images"},{kind:"MdxPage",name:"localization",route:"/frontend/localization"},{kind:"MdxPage",name:"menu",route:"/frontend/menu"},{kind:"MdxPage",name:"navigation-breadcrumbs",route:"/frontend/navigation-breadcrumbs"},{kind:"MdxPage",name:"search",route:"/frontend/search"},{kind:"MdxPage",name:"seo",route:"/frontend/seo"},{kind:"MdxPage",name:"svg",route:"/frontend/svg"},{kind:"MdxPage",name:"texts",route:"/frontend/texts"}]},{kind:"MdxPage",name:"graphql",route:"/graphql"},{kind:"MdxPage",name:"index",route:"/"},{kind:"MdxPage",name:"meilisearch",route:"/meilisearch"},{kind:"Folder",name:"monitoring-and-observability",route:"/monitoring-and-observability",children:[{kind:"Folder",name:"alerting",route:"/monitoring-and-observability/alerting",children:[{kind:"MdxPage",name:"contact-point",route:"/monitoring-and-observability/alerting/contact-point"},{kind:"MdxPage",name:"endpoint_alert",route:"/monitoring-and-observability/alerting/endpoint_alert"},{kind:"MdxPage",name:"grafana_alerting",route:"/monitoring-and-observability/alerting/grafana_alerting"},{kind:"MdxPage",name:"log_alert",route:"/monitoring-and-observability/alerting/log_alert"},{kind:"MdxPage",name:"resource_alert",route:"/monitoring-and-observability/alerting/resource_alert"},{kind:"Meta",data:{"contact-point":"Contact Point",endpoint_alert:"Endpoint Alert",grafana_alerting:"Grafana Alerting",log_alert:"Log Alert",resource_alert:"Resource Alert"}}]},{kind:"MdxPage",name:"grafana",route:"/monitoring-and-observability/grafana"},{kind:"Meta",data:{grafana:"Grafana"}}]},{kind:"Folder",name:"onboarding",route:"/onboarding",children:[{kind:"Meta",data:{"editor-setup":"Editor Setup","docker-setup":"Docker / Podman Setup","wsl-setup":"Windows WSL Setup","kubernetes-lens-setup":"Kubernetes & Lens Setup","postgres-setup":"Postgres Setup",other:"Other Setups","--- Workflow ---":{type:"separator"},"developer-accesses":"Developer Accesses","git-workflow":"Git Workflow"}},{kind:"MdxPage",name:"developer-accesses",route:"/onboarding/developer-accesses"},{kind:"MdxPage",name:"docker-setup",route:"/onboarding/docker-setup"},{kind:"MdxPage",name:"editor-setup",route:"/onboarding/editor-setup"},{kind:"MdxPage",name:"git-workflow",route:"/onboarding/git-workflow"},{kind:"MdxPage",name:"kubernetes-lens-setup",route:"/onboarding/kubernetes-lens-setup"},{kind:"MdxPage",name:"other",route:"/onboarding/other"},{kind:"MdxPage",name:"postgres-setup",route:"/onboarding/postgres-setup"},{kind:"MdxPage",name:"wsl-setup",route:"/onboarding/wsl-setup"}]},{kind:"MdxPage",name:"openapi",route:"/openapi"},{kind:"Folder",name:"strapi",route:"/strapi",children:[{kind:"Meta",data:{"general-concepts":"General concepts","best-practices":"Best practices","make-content-public":"Make the content public",setup:"Setup","load-strapi-db-in-local-dev":"Load DB for local development","sync-strapi-db-to-different-env":"Sync DB between deployments"}},{kind:"MdxPage",name:"best-practices",route:"/strapi/best-practices"},{kind:"MdxPage",name:"load-strapi-db-in-local-dev",route:"/strapi/load-strapi-db-in-local-dev"},{kind:"MdxPage",name:"make-content-public",route:"/strapi/make-content-public"},{kind:"MdxPage",name:"setup",route:"/strapi/setup"},{kind:"MdxPage",name:"sync-strapi-db-to-different-env",route:"/strapi/sync-strapi-db-to-different-env"}]}],flexsearch:{codeblocks:!0},title:"Alerting on Endpoint Availability or Request Data (HTTP Request)"},pageNextRoute:"/monitoring-and-observability/alerting/endpoint_alert",nextraLayout:r.ZP,themeConfig:o.Z};function m(e){let n=Object.assign({h1:"h1",p:"p",a:"a",ol:"ol",li:"li",ul:"ul",code:"code",br:"br",em:"em",strong:"strong",pre:"pre",span:"span",h2:"h2"},(0,s.ah)(),e.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"alerting-on-endpoint-availability-or-request-data-http-request",children:"Alerting on Endpoint Availability or Request Data (HTTP Request)"}),"\n",(0,a.jsxs)(n.p,{children:["Sometime you want to monitor endpoint that your application exposes, such as various health endpoints and/or the data those endpoints provide. For this, use-case we use ",(0,a.jsx)(n.a,{href:"https://grafana.com/grafana/plugins/yesoreyeram-infinity-datasource/",children:"Infinity"})," data source that provides simple capabilities on making requests to endpoints and parsing the JSON response data."]}),"\n",(0,a.jsx)(n.p,{children:"To create such an alert we need to"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["First go to ",(0,a.jsx)(n.a,{href:"https://grafana.bratislava.sk/alerting/list",children:"Alert section"}),' in Grafana (bell icon on the left menu). Then hit the "+ New alert rule" button.\n',(0,a.jsx)(l(),{alt:"create new alert",placeholder:"blur",src:c.Z})]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Fill in the metadata of rule"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"Rule name"}),", give it what ever you feel is descriptive"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"Folder"}),", select based on the cluster"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"Group"}),", you can put anything in place of a group, like project name",(0,a.jsx)(n.br,{}),"\n",(0,a.jsx)(n.em,{children:"Bear in mind that all alerts within the same group will be evaluated at the same time. So, if you are planing on creating more alerts for one project, we would suggest to give it the name of that project"})]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:'Select "Infinity" as data source. Optionally, we can also change name of expression from "A" to maybe something more descriptive'}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["The only thing we ",(0,a.jsx)(n.strong,{children:"need"})," to specify is ",(0,a.jsx)(n.code,{children:"Parser"})," field to be ",(0,a.jsx)(n.code,{children:'"Backend"'}),". Also note, that for alerting, Infinity supports ",(0,a.jsx)(n.a,{href:"https://sriramajeyam.com/grafana-infinity-datasource/wiki/limitations/",children:"only JSON queries"})]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Then just fill out the URL. Select method that you want (GET, POST) and fields to parse out from the JSON response based on what you want to check\n",(0,a.jsx)(l(),{alt:"infinity alert example",placeholder:"blur",src:u})]}),"\n",(0,a.jsx)(n.pre,{"data-language":"text","data-theme":"default",children:(0,a.jsx)(n.code,{"data-language":"text","data-theme":"default",children:(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  _Note, Grafana can only work and alert on numeric responses, therefore your endpoint has to return some sort of a number_"})})})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:['Next, we need to add "Math" expression where we check out whether response is correct. In our example case, we want alert if response status is not ',(0,a.jsx)(n.code,{children:"200"}),"\n",(0,a.jsx)(l(),{alt:"infinity math expression",placeholder:"blur",src:p})]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:['We need to define alert condition. Select the name of our "Math" expression and set check interval (',(0,a.jsx)(n.code,{children:"Evaluate"}),") and for how long should the alert be pending before firing (",(0,a.jsx)(n.code,{children:"for"}),")."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Lastly, we want to add some description and summary to our alert, with some custom labels, that would help us to better specify what is going on, when we receive the alert notification\n",(0,a.jsx)(l(),{alt:"infinity alert details",placeholder:"blur",src:g})]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["And that is it. Now you can just <font color=\"white\" style={{backgroundColor: '#3871dc', padding: '2px'}}>",(0,a.jsx)(n.strong,{children:'"Save and exit"'}),", and your alert should be running, and firing in case of any issues.",(0,a.jsx)(n.br,{}),"\n","The default contact point is through Slack to ",(0,a.jsx)(n.code,{children:"grafana-alerting"})," channel. If you want to receive your alerts somewhere else or through some other means, please checkout ",(0,a.jsx)(n.a,{href:"./contact-point",children:'"How to add Contact Point"'})," recipe."]}),"\n",(0,a.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"https://grafana.bratislava.sk/alerting/grafana/FpIQuG44z/view?returnTo=%2Falerting%2Flist%3Fview%3Dgrouped",children:"Infinity alert"})," complex health check on application endpoint"]}),"\n"]})]})}var b=(0,i.j)(h)}},function(e){e.O(0,[9774,5840,2888,179],function(){return e(e.s=6915)}),_N_E=e.O()}]);