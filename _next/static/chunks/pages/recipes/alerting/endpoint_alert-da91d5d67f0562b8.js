(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8885],{3665:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/recipes/alerting/endpoint_alert",function(){return n(8332)}])},1768:function(e,t){"use strict";t.Z={src:"/_next/static/media/create_new_alert.ec738f93.png",height:545,width:1583,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAYAAACuyE5IAAAATUlEQVR4nB2KSQ6AMAwD3QUqhOD/b4QLJRzCpW6SkWxZI6evv/xVsewbQAQ5Z+uAqV83i4l6HsAYIBkHj00mEeHaGmopJsxYHD/0RzkBZXQimyJVdo0AAAAASUVORK5CYII=",blurWidth:8,blurHeight:3}},3957:function(e,t,n){"use strict";var a=n(5893);n(7294);let r={logo:(0,a.jsx)("span",{children:"\uD83D\uDCDA Bratislava Documentation"}),project:{link:"https://github.com/bratislava"},docsRepositoryBase:"https://github.com/bratislava/bratislava.github.io",sidebar:{defaultMenuCollapseLevel:0},footer:{text:"Department of Innovation and Technology of the City of Bratislava"},faviconGlyph:"\uD83D\uDCDA"};t.Z=r},8332:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g.ZP}});var a,r=n(5893),i=n(2720),s=n(3957);n(5513);var o=n(1151),l=n(5675),d=n.n(l),c=n(1768),u={src:"/_next/static/media/infinity_alert_example.f01a1c87.png",height:405,width:1428,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAIAAADq9gq6AAAAKUlEQVR42hWGwQ0AIAyE3H9ZG472bSWEcIiAGr1VJHavJ4tuZuYPSOx+dAUtogHrh3wAAAAASUVORK5CYII=",blurWidth:8,blurHeight:2},p={src:"/_next/static/media/infinity_math_example.5de86c61.png",height:190,width:347,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r+mnAAAASElEQVR42jXKUQ6AMAgDUO5/ThMTIz9ssgo4xSW89KdpSVrfdj64ScsIgAHoGOTuqldEyD91VQXurPSWp8yFAJzMeczXLGb2AQ54XSQvO5buAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:4},h={src:"/_next/static/media/infinity_summary_description_info.92a26672.png",height:424,width:618,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAAPFBMVEX////+/v79/f38/Pz7+/v6+/v6+vr5+vr5+fn4+Pj39/f29/f29vb19vb19fXy8/Pw8PDv8PDv7+/u7u/W4kQPAAAAMElEQVR42g3JSwIAEAgFwKeISPnc/67MdnC3qzUwehZtnBxEoUASTInClX6y0Vh6Hhu6ATKxDV+BAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:5},g=n(1235);let m={filePath:"pages/recipes/alerting/endpoint_alert.md",route:"/recipes/alerting/endpoint_alert",frontMatter:{},pageMap:[{kind:"Meta",data:{index:"Introduction","bratislava.sk":"Bratislava.sk","deployment-and-infrastructure":"Deployment and Infrastructure",graphql:"GraphQL",meilisearch:"Meilisearch",nestjs:"Nestjs",other:"Other",recipes:"Recipes",strapi:"Strapi"}},{kind:"Folder",name:"bratislava.sk",route:"/bratislava.sk",children:[{kind:"MdxPage",name:"add-new-component-to-sections",route:"/bratislava.sk/add-new-component-to-sections"},{kind:"MdxPage",name:"colors-and-themes",route:"/bratislava.sk/colors-and-themes"},{kind:"MdxPage",name:"forms-general",route:"/bratislava.sk/forms-general"},{kind:"MdxPage",name:"forms-uischema",route:"/bratislava.sk/forms-uischema"},{kind:"MdxPage",name:"forms-upload-file",route:"/bratislava.sk/forms-upload-file"},{kind:"MdxPage",name:"meilisearch-setup",route:"/bratislava.sk/meilisearch-setup"},{kind:"MdxPage",name:"react-component-structure",route:"/bratislava.sk/react-component-structure"},{kind:"Meta",data:{"add-new-component-to-sections":"Add New Component to Sections","colors-and-themes":"Colors and Themes","forms-general":"Forms General","forms-uischema":"Forms Uischema","forms-upload-file":"Forms Upload File","meilisearch-setup":"Meilisearch Setup","react-component-structure":"React Component Structure"}}]},{kind:"Folder",name:"deployment-and-infrastructure",route:"/deployment-and-infrastructure",children:[{kind:"MdxPage",name:"backups",route:"/deployment-and-infrastructure/backups"},{kind:"MdxPage",name:"database-backups",route:"/deployment-and-infrastructure/database-backups"},{kind:"MdxPage",name:"deployment",route:"/deployment-and-infrastructure/deployment"},{kind:"MdxPage",name:"grafana",route:"/deployment-and-infrastructure/grafana"},{kind:"Meta",data:{backups:"Backups","database-backups":"Database Backups",deployment:"Deployment",grafana:"Grafana"}}]},{kind:"MdxPage",name:"graphql",route:"/graphql"},{kind:"MdxPage",name:"index",route:"/",frontMatter:{sidebar_position:1}},{kind:"MdxPage",name:"meilisearch",route:"/meilisearch"},{kind:"Folder",name:"nestjs",route:"/nestjs",children:[{kind:"MdxPage",name:"Authentication",route:"/nestjs/Authentication"},{kind:"MdxPage",name:"CardWebPay",route:"/nestjs/CardWebPay"},{kind:"MdxPage",name:"Controllers",route:"/nestjs/Controllers"},{kind:"MdxPage",name:"Kubernetes",route:"/nestjs/Kubernetes"},{kind:"MdxPage",name:"Logging",route:"/nestjs/Logging"},{kind:"MdxPage",name:"Module",route:"/nestjs/Module"},{kind:"MdxPage",name:"NestJS",route:"/nestjs/NestJS",frontMatter:{sidebar_position:1}},{kind:"MdxPage",name:"OpenAPI",route:"/nestjs/OpenAPI"},{kind:"MdxPage",name:"Prisma",route:"/nestjs/Prisma"},{kind:"MdxPage",name:"ProjectStructure",route:"/nestjs/ProjectStructure"},{kind:"MdxPage",name:"RestApi",route:"/nestjs/RestApi"},{kind:"MdxPage",name:"Sentry",route:"/nestjs/Sentry"},{kind:"MdxPage",name:"Services",route:"/nestjs/Services"},{kind:"MdxPage",name:"Testing",route:"/nestjs/Testing"},{kind:"Meta",data:{Authentication:"Authentication",CardWebPay:"Cardwebpay",Controllers:"Controllers",Kubernetes:"Kubernetes",Logging:"Logging",Module:"Module",NestJS:"Nestjs",OpenAPI:"Openapi",Prisma:"Prisma",ProjectStructure:"Projectstructure",RestApi:"Restapi",Sentry:"Sentry",Services:"Services",Testing:"Testing"}}]},{kind:"Folder",name:"other",route:"/other",children:[{kind:"MdxPage",name:"developer-accesses",route:"/other/developer-accesses",frontMatter:{sidebar_position:2}},{kind:"MdxPage",name:"meetings-syncs-rituals",route:"/other/meetings-syncs-rituals",frontMatter:{sidebar_position:3}},{kind:"Meta",data:{"developer-accesses":"Developer Accesses","meetings-syncs-rituals":"Meetings Syncs Rituals"}}]},{kind:"Folder",name:"recipes",route:"/recipes",children:[{kind:"Folder",name:"alerting",route:"/recipes/alerting",children:[{kind:"MdxPage",name:"contact-point",route:"/recipes/alerting/contact-point"},{kind:"MdxPage",name:"endpoint_alert",route:"/recipes/alerting/endpoint_alert"},{kind:"MdxPage",name:"grafana_alerting",route:"/recipes/alerting/grafana_alerting",frontMatter:{sidebar_position:1}},{kind:"MdxPage",name:"log_alert",route:"/recipes/alerting/log_alert"},{kind:"MdxPage",name:"resource_alert",route:"/recipes/alerting/resource_alert"},{kind:"Meta",data:{"contact-point":"Contact Point",endpoint_alert:"Endpoint Alert",grafana_alerting:"Grafana Alerting",log_alert:"Log Alert",resource_alert:"Resource Alert"}}]},{kind:"MdxPage",name:"connecting-to-kubernetes",route:"/recipes/connecting-to-kubernetes"},{kind:"MdxPage",name:"debug-cluster-connectivity",route:"/recipes/debug-cluster-connectivity"},{kind:"MdxPage",name:"docker-setup",route:"/recipes/docker-setup"},{kind:"MdxPage",name:"editor-setup",route:"/recipes/editor-setup"},{kind:"MdxPage",name:"env-vars-and-secrets",route:"/recipes/env-vars-and-secrets"},{kind:"MdxPage",name:"git-workflow",route:"/recipes/git-workflow"},{kind:"MdxPage",name:"kubernetes-lens-setup",route:"/recipes/kubernetes-lens-setup"},{kind:"MdxPage",name:"postgres-setup",route:"/recipes/postgres-setup"},{kind:"MdxPage",name:"production-deployment-checklist",route:"/recipes/production-deployment-checklist"},{kind:"MdxPage",name:"sentry-setup",route:"/recipes/sentry-setup"},{kind:"MdxPage",name:"wsl",route:"/recipes/wsl"},{kind:"Meta",data:{alerting:"Alerting","connecting-to-kubernetes":"Connecting to Kubernetes","debug-cluster-connectivity":"Debug Cluster Connectivity","docker-setup":"Docker Setup","editor-setup":"Editor Setup","env-vars-and-secrets":"Env Vars and Secrets","git-workflow":"Git Workflow","kubernetes-lens-setup":"Kubernetes Lens Setup","postgres-setup":"Postgres Setup","production-deployment-checklist":"Production Deployment Checklist","sentry-setup":"Sentry Setup",wsl:"Wsl"}}]},{kind:"Folder",name:"strapi",route:"/strapi",children:[{kind:"MdxPage",name:"general-concepts",route:"/strapi/general-concepts",frontMatter:{sidebar_position:1}},{kind:"MdxPage",name:"load-strapi-db-in-local-dev",route:"/strapi/load-strapi-db-in-local-dev"},{kind:"MdxPage",name:"setup",route:"/strapi/setup",frontMatter:{sidebar_position:2}},{kind:"MdxPage",name:"sync-strapi-db-to-different-env",route:"/strapi/sync-strapi-db-to-different-env"},{kind:"Meta",data:{"general-concepts":"General Concepts","load-strapi-db-in-local-dev":"Load Strapi Db in Local Dev",setup:"Setup","sync-strapi-db-to-different-env":"Sync Strapi Db to Different Env"}}]}],headings:[{type:"heading",depth:1,children:[{type:"text",value:"Alerting on Endpoint Availability or Request Data (HTTP Request)",position:{start:{line:1,column:3,offset:2},end:{line:1,column:67,offset:66}}}],position:{start:{line:1,column:1,offset:0},end:{line:1,column:67,offset:66}},value:"Alerting on Endpoint Availability or Request Data (HTTP Request)"},{type:"heading",depth:2,children:[{type:"text",value:"Examples",position:{start:{line:32,column:4,offset:3131},end:{line:32,column:12,offset:3139}}}],position:{start:{line:32,column:1,offset:3128},end:{line:32,column:12,offset:3139}},value:"Examples"}],flexsearch:{codeblocks:!0}};globalThis.__nextra_internal__={pageMap:m.pageMap,route:m.route};let A="Alerting on Endpoint Availability or Request Data (HTTP Request)";function f(e){let t=Object.assign({h1:"h1",p:"p",a:"a",ol:"ol",li:"li",ul:"ul",code:"code",br:"br",em:"em",strong:"strong",h2:"h2"},(0,o.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{children:"Alerting on Endpoint Availability or Request Data (HTTP Request)"}),"\n",(0,r.jsxs)(t.p,{children:["Sometime you want to monitor endpoint that your application exposes, such as various health endpoints and/or the data those endpoints provide. For this, use-case we use ",(0,r.jsx)(t.a,{href:"https://grafana.com/grafana/plugins/yesoreyeram-infinity-datasource/",children:"Infinity"})," data source that provides simple capabilities on making requests to endpoints and parsing the JSON response data."]}),"\n",(0,r.jsx)(t.p,{children:"To create such an alert we need to"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["First go to ",(0,r.jsx)(t.a,{href:"https://grafana.bratislava.sk/alerting/list",children:"Alert section"}),' in Grafana (bell icon on the left menu). Then hit the "+ New alert rule" button.\n',(0,r.jsx)(d(),{alt:"create new alert",placeholder:"blur",src:c.Z})]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Fill in the metadata of rule"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"Rule name"}),", give it what ever you feel is descriptive"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"Folder"}),", select based on the cluster"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"Group"}),", you can put anything in place of a group, like project name",(0,r.jsx)(t.br,{}),"\n",(0,r.jsx)(t.em,{children:"Bear in mind that all alerts within the same group will be evaluated at the same time. So, if you are planing on creating more alerts for one project, we would suggest to give it the name of that project"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:'Select "Infinity" as data source. Optionally, we can also change name of expression from "A" to maybe something more descriptive'}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["The only thing we ",(0,r.jsx)(t.strong,{children:"need"})," to specify is ",(0,r.jsx)(t.code,{children:"Parser"})," field to be ",(0,r.jsx)(t.code,{children:'"Backend"'}),". Also note, that for alerting, Infinity supports ",(0,r.jsx)(t.a,{href:"https://sriramajeyam.com/grafana-infinity-datasource/wiki/limitations/",children:"only JSON queries"})]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Then just fill out the URL. Select method that you want (GET, POST) and fields to parse out from the JSON response based on what you want to check\n",(0,r.jsx)(d(),{alt:"infinity alert example",placeholder:"blur",src:u})]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Note, Grafana can only work and alert on numeric responses, therefore your endpoint has to return some sort of a number"})}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:['Next, we need to add "Math" expression where we check out whether response is correct. In our example case, we want alert if response status is not ',(0,r.jsx)(t.code,{children:"200"}),"\n",(0,r.jsx)(d(),{alt:"infinity math expression",placeholder:"blur",src:p})]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:['We need to define alert condition. Select the name of our "Math" expression and set check interval (',(0,r.jsx)(t.code,{children:"Evaluate"}),") and for how long should the alert be pending before firing (",(0,r.jsx)(t.code,{children:"for"}),")."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Lastly, we want to add some description and summary to our alert, with some custom labels, that would help us to better specify what is going on, when we receive the alert notification\n",(0,r.jsx)(d(),{alt:"infinity alert details",placeholder:"blur",src:h})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["And that is it. Now you can just ",(0,r.jsx)("font",{color:"white",style:{backgroundColor:"#3871dc",padding:"2px"},children:(0,r.jsx)(t.strong,{children:'"Save and exit"'})}),", and your alert should be running, and firing in case of any issues.",(0,r.jsx)(t.br,{}),"\n","The default contact point is through Slack to ",(0,r.jsx)(t.code,{children:"grafana-alerting"})," channel. If you want to receive your alerts somewhere else or through some other means, please checkout ",(0,r.jsx)(t.a,{href:"./contact-point",children:'"How to add Contact Point"'})," recipe."]}),"\n",(0,r.jsx)(t.h2,{id:"examples",children:"Examples"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"https://grafana.bratislava.sk/alerting/grafana/FpIQuG44z/view?returnTo=%2Falerting%2Flist%3Fview%3Dgrouped",children:"Infinity alert"})," complex health check on application endpoint"]}),"\n"]})]})}function x(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:t}=Object.assign({},(0,o.ah)(),e.components);return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(f,{...e})}):f(e)}m.title="string"==typeof A&&A||"Endpoint Alert";let k=e=>(0,r.jsx)(i.mK.Provider,{value:e,children:(0,r.jsx)(x,{})});(a=globalThis).__nextra_pageContext__||(a.__nextra_pageContext__=Object.create(null)),globalThis.__nextra_pageContext__["/recipes/alerting/endpoint_alert"]={Content:k,pageOpts:m,themeConfig:s.Z}}},function(e){e.O(0,[9774,5860,2888,179],function(){return e(e.s=3665)}),_N_E=e.O()}]);